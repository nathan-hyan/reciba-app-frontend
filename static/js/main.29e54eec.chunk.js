(this["webpackJsonpreciba-app"]=this["webpackJsonpreciba-app"]||[]).push([[0],{158:function(e,t,a){"use strict";a.r(t);var n,c=a(3),r=a(277),s=a(169);c.a.use(r.a).use(s.a).init({fallbackLng:localStorage.getItem("i18nextLng")||"en",detection:{order:["localStorage"],cache:["localStorage"]},interpolation:{escapeValue:!1}}),(n=a(254)).keys().map(n)},163:function(e,t,a){e.exports={qrcode:"styles_qrcode__1IE9l"}},254:function(e,t,a){var n={"./components/LoadingScreen/i18n.ts":255,"./components/Navigation/i18n.ts":256,"./screens/Dashboard/components/Filter/i18n.ts":257,"./screens/Dashboard/components/InvoicesList/i18n.ts":258,"./screens/Dashboard/components/SendMailModal/i18n.ts":259,"./screens/Dashboard/components/TagsModal/i18n.ts":260,"./screens/Dashboard/i18n.ts":261,"./screens/DisplayInvoice/components/Bill/i18n.ts":262,"./screens/DisplayInvoice/components/ButtonsGroup/i18n.ts":263,"./screens/DisplayInvoice/components/EmailInput/i18n.ts":264,"./screens/DisplayInvoice/i18n.ts":265,"./screens/GenerateInvoice/components/ShowQRCodeModal/i18n.ts":266,"./screens/GenerateInvoice/i18n.ts":267,"./screens/Home/i18n.ts":268,"./screens/Login/i18n.ts":269,"./screens/Logout/i18n.ts":270,"./screens/Signature/components/DownloadModal/i18n.ts":271,"./screens/Signature/i18n.ts":272,"./screens/Signup/i18n.ts":273,"./utils/i18n.js":158};function c(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=254},255:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","LoadingScreen",{text:"Cargando datos"}),n.a.addResources("en","LoadingScreen",{text:"Loading data"})},256:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","NavBar",{actualUser:"Usuario actual",guest:"Invitado"}),n.a.addResources("en","NavBar",{actualUser:"Current user",guest:"Guest"}),n.a.addResources("es","LoggedInOpts",{home:"Principal",newInvoice:"Nuevo comprobante",dashboard:"Tablero",profile:"Perfil",closeSession:"Cerrar sesi\xf3n"}),n.a.addResources("en","LoggedInOpts",{home:"Home",newInvoice:"New invoice",dashboard:"Dashboard",profile:"Profile",closeSession:"Log out"}),n.a.addResources("es","LoggedOutOpts",{login:"Iniciar sesi\xf3n",signUp:"Crear usuario"}),n.a.addResources("en","LoggedOutOpts",{login:"Log in",signUp:"Sign up"})},257:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Filter",{filter:"Filtro",title:"Mostrando las boletas de",tag:"Etiqueta",from:"Desde",to:"Hasta",search:"Buscar",payment:"Metodo de pago",cleanSearch:"Limpiar b\xfasqueda",all:"Todos los m\xe9todos"}),n.a.addResources("en","Filter",{filter:"Filter",title:"Displaying invoices from",tag:"Tag",from:"Since",to:"To",search:"Search",payment:"Payment type",cleanSearch:"Clean search",all:"All methods"})},258:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Invoices",{pending:"Boletas pendientes",completed:"Boletas finalizadas",mail:"Mail ya enviado a"}),n.a.addResources("en","Invoices",{pending:"Pending invoices",completed:"Completed invoices",mail:"Email already sent to"})},259:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Mail",{noValue:"Debe especificar un mail v\xe1lido",cantSend:"Ocurri\xf3 un error enviando el mail, reintente",title:"Enviar por mail",address:"Direcci\xf3n de correo",linkText:"Tambi\xe9n pod\xe9s copiar este link y pasarlo por privado",close:"Cerrar",loading:"Espere un momento...",send:"Enviar"}),n.a.addResources("en","Mail",{noValue:"You must specify a valid e-mail address",cantSend:"There was an error sending the mail. Please, try again",title:"Send via e-mail",address:"E-mail address",linkText:"You can also copy this link and send it via private message",close:"Close",loading:"Just a moment...",send:"Send"})},260:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Tags",{title:"Agregar etiquetas",label:"Etiquetas separadas por comas",placeholder:"pendiente, seguimiento",close:"Cerrar",save:"Guardar"}),n.a.addResources("en","Tags",{title:"Add tags",label:"Tags separated by commas",placeholder:"pending, person name",close:"Close",save:"Save"})},261:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Dashboard",{queryError:"Ocurri\xf3 un error trayendo los datos",deleteBill:"Advertencia, se borrar\xe1 la boleta. \xbfDesea continuar?",deleteConfirm:"Boleta borrada correctamente"}),n.a.addResources("en","Dashboard",{queryError:"There was an error getting the data",deleteBill:"Warning! The invoice will be deleted. Do you want to continue?",deleteConfirm:"Invoice deleted successfully"})},262:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Invoice",{originalInvoice:"Recibo original",duplicateInvoice:"Recibo duplicado",receiptNumber:"Recibo N\xb0",date:"Fecha",received:"Recib\xed",from:"De",quantity:"La cantidad de",inConceptOf:"En concepto de",receiptBy:"Recibo por",signature:"Firma"}),n.a.addResources("en","Invoice",{originalInvoice:"Original receipt",duplicateInvoice:"Duplicated receipt",receiptNumber:"Invoice number",date:"Date",received:"I received",from:"From",quantity:"Quantity of",inConceptOf:"In concept of",receiptBy:"Receipt by",signtaure:"Signature"})},263:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Buttons",{download:"Descargar PDF",sendToPhone:"Enviar PDF al tel\xe9fono",sendToMail:"Enviar copia por mail"}),n.a.addResources("en","Buttons",{download:"Download PDF",sendToPhone:"Send PDF to phone",sendToMail:"Send a copy via E-mail"})},264:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","EmailInput",{title:"Direcci\xf3n de E-mail",placeholder:"correo@servidor.com",error:"Se necesita un E-mail v\xe1lido",send:"Enviar"}),n.a.addResources("en","EmailInput",{title:"E-mail address",placeholder:"mail@server.com",error:"Enter a valid E-mail address",send:"Send"})},265:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","DisplayInvoice",{error:"Ocurri\xf3 un error"}),n.a.addResources("en","DisplayInvoice",{error:"There was an error"})},266:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","QR",{body:"Escanee el c\xf3digo con el celular para poder firmar en este comprobante",alternative:"Tambi\xe9n puede ingresar ac\xe1 para firmar",finishing:"Al terminar la firma, espere hasta que la otra persona termine",close:"Cerrar"}),n.a.addResources("en","QR",{body:"Scan this code with your phone to sign the invoice",alternative:"You can also enter with this URL",finishing:"When finished, please wait until the other person finishes",close:"Close"})},267:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","GenerateInvoice",{signatureNeeded:"Se necesita la firma para continuar",verifyForm:"Por favor, verifique el formulario y reintente",errorCreatingInvoice:"Ocurri\xf3 un error creando el comprobante. Por favor, reintente",phoneConnected:"Tel\xe9fono conectado",markAsPending:"Marcar para firmar luego",QR:"Mostrar c\xf3digo QR",cancel:"Cancelar",save:"Guardar",transactionNumber:"Numero de transacci\xf3n"}),n.a.addResources("en","GenerateInvoice",{signatureNeeded:"The signature is required to continue",verifyForm:"Please verify the form before continuing",errorCreatingInvoice:"There was an error creating the invoice. Please, retry",phoneConnected:"Phone connected",markAsPending:"Mark as pending",QR:"Show QR code",cancel:"Cancel",save:"Save",transactionNumber:"Transaction number"}),n.a.addResources("es","GIError",{date:"La fecha es necesaria"}),n.a.addResources("es","GIError",{date:"The date is required"}),n.a.addResources("es","Radio",{cash:"Efectivo",check:"Cheque",creditcard:"Tarjeta de cr\xe9dito",transfer:"Transferencia"}),n.a.addResources("en","Radio",{cash:"Cash",check:"Check",creditcard:"Credit card",transfer:"Bank Transfer"})},268:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Home",{title:"Basta de usar papel para tus comprobantes",body:"\xa1Ahora pod\xe9s hacer todo digital! Cre\xe1, guard\xe1, envi\xe1 comprobantes desde tu casa sin necesidad de contacto f\xedsico.",startNow:"\xa1Comenz\xe1 ahora!",currentTime:"Hora actual"}),n.a.addResources("en","Home",{title:"Stop using paper for your invoices",body:"\xa1Now you can do everything digitally! Create, save and send invoices from your house without the need of contact.",startNow:"\xa1Start now!",currentTime:"Current time"})},269:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Login",{verifyData:"Por favor, verifique los datos antes de continuar",error:"Ocurri\xf3 un error. Por favor, reintente",email:"Direcci\xf3n de E-mail",emailValidation:"Por favor, ingrese un E-mail v\xe1lido",password:"Contrase\xf1a",passwordValidation:"Por favor, ingrese su contrase\xf1a",login:"Iniciar sesi\xf3n"}),n.a.addResources("en","Login",{verifyData:"Please, verify the form before continuing",error:"There was an error. Please, retry",email:"E-mail address",emailValidation:"Please, enter a valid E-mail",password:"Password",passwordValidation:"Please, enter your password",login:"Log in"})},270:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Logout",{title:"Qu\xe9 l\xe1stima verte partir",body:"\xa1Ojal\xe1 podamos volverte a ver pronto!",goBack:"Volver a la p\xe1gina principal"}),n.a.addResources("en","Logout",{title:"It's sad to see you go",body:"We wish to see you soon again!",goBack:"Go back home"})},271:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","DownloadModal",{title:"\xa1Comprobante listo!",body:"Su comprobante ha sido generado con \xe9xito. \xbfDesea descargar una copia?",ignore:"Ignorar",download:"Descargar comprobante"}),n.a.addResources("en","DownloadModal",{title:"Invoice ready!",body:"Your invoice is ready! Wish to download a copy?",ignore:"Ignore",download:"Download"})},272:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Signature",{confirm:"\xbfConfirma el env\xedo de la firma a",success:"Se ha firmado correctamente. Ya puede salir de la App",greeting:"\xa1Hola!",received:"Recibi\xf3 esta boleta de",concept:"con el concepto de",amount:"por el momnto de",sign:"Firme en el campo en blanco para continuar",horizontal:"Coloque el tel\xe9fono de forma horizontal para mejor resultado",reset:"Reiniciar firma",send:"Enviar firma",alert:"\xa1No cierre esta p\xe1gina!",alertBody:"Cuando se genere el comprobante, aparecer\xe1 un bot\xf3n para descargar una copia"}),n.a.addResources("en","Signature",{confirm:"Do you really want to send this signature to",success:"Invoice signed correctly. You can now close this window",greeting:"Hello!",received:"You received this invoice from",concept:"with the concept of",amount:"by the amount of",sign:"Sign in the white letterbox",horizontal:"For a better result, turn your phone in landscape mode",reset:"Reset signature",send:"Send",alert:"Don't close this window!",alertBody:"When the invoice is completed, there will be a button to download a copy"})},273:function(e,t,a){"use strict";a.r(t);var n=a(3);n.a.addResources("es","Signup",{verifyForm:"Por favor, verifique los datos antes de continuar",error:"Ocurri\xf3 un error. Reintente, por favor.",title:"\xa1Registrese para obtener m\xe1s beneficios!",body:"Guardar comprobantes, marcar para firmarlos luego y envie por mail! Todos estos beneficios y m\xe1s siendo miembro premium.",name:"Nombre",nameValidation:"El nombre es requerido",email:"Direcci\xf3n de E-mail",emailValidation:"La direcci\xf3n de E-mail es requerida",password:"Contrase\xf1a",passwordValidation:"La contrase\xf1a es requerida",passwordConfirmation:"Repita la contrase\xf1a",passwordConfirmationValidation:"Es necesario que repita la contrase\xf1a correctamente",save:"Guardar",invalidToken:"Por favor, verifique el Captcha antes de continuar"}),n.a.addResources("en","Signup",{verifyForm:"Please, verify the data before continuing",error:"There was an error. Please, retry",title:"Register in order to get more benefits!",body:"Save benefits, mark them as pending and send them via e-mail! All of this and more benefits by becoming a premium member.",name:"Name",nameValidation:"The name is required",email:"E-mail address",emailValidation:"E-mail address is required",password:"Password",passwordValidation:"Password is required",passwordConfirmation:"Repeat password",passwordConfirmationValidation:"Is necessary that both passwords are the same",save:"Save",invalidToken:"Please, verify the Captcha before continuing"})},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),s=a.n(r),o=a(15),i=a(12),d=a.n(i),l=a(13),j=a(3),u=a(29),b=a.n(u),m=a(1),h=Object(n.createContext)({language:localStorage.getItem("i18nextLng"),setLanguage:function(){}});function O(e){var t=e.children,a=Object(n.useState)(localStorage.getItem("i18nextLng")),c=Object(l.a)(a,2),r=c[0],s=c[1];return j.a.on("languageChanged",(function(e){b.a.locale(e)})),Object(m.jsx)(h.Provider,{value:{language:r,setLanguage:function(e){j.a.changeLanguage(e||"es"),s(e)}},children:t})}var p={zIndex:998,top:"56px",colors:{error:{color:"#FFFFFF",backgroundColor:"#ff7851"},success:{color:"#FFFFFF",backgroundColor:"#56cc9d"}}},g=a(123),x=a.n(g),f=a(23),v=a(159),y=Object(n.createContext)({generateId:function(){return""},currentId:""});function w(e){var t=e.children,a=Object(n.useState)(""),c=Object(l.a)(a,1)[0];return Object(m.jsx)(y.Provider,{value:{generateId:function(){return Object(v.v4)()},currentId:c},children:t})}var I=a(14),N=a(174),S=a(16),C=a.n(S),k="https://recibapp.herokuapp.com/",D="https://reciba.app/",L="be3fd67b-1a61-4936-b57f-600e3765988f",R=Object(n.createContext)({}),T=function(e){var t=e.children,a=Object(f.g)(),c=localStorage.getItem("bill-token"),r=Object(n.useState)({isLoggedIn:!1,level:9,token:"",name:""}),s=Object(l.a)(r,2),o=s[0],d=s[1];return c&&!o.isLoggedIn&&C.a.post("".concat(k,"api/user/loggedInUser"),{storedToken:c},{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){localStorage.setItem("bill-token",e.data.data.token),d({isLoggedIn:!0,level:9,token:e.data.data.token,name:e.data.data.name})})).catch((function(e){localStorage.removeItem("bill-token");var t=e.response?e.response.data.message:e.message;i.notify.show(t,"error"),d({isLoggedIn:!1,level:9,token:"",name:""}),a.push("/")})),Object(m.jsx)(R.Provider,{value:Object(I.a)(Object(I.a)({},o),{},{setUserData:d}),children:t})},F=function(e){var t=e.render,a=Object(N.a)(e,["render"]),c=Object(n.useContext)(R);return Object(m.jsx)(f.b,Object(I.a)(Object(I.a)({},a),{},{render:function(e){return c.isLoggedIn||localStorage.getItem("bill-token")?Object(m.jsx)(t,Object(I.a)({},e)):Object(m.jsx)(f.a,{to:"/"})}}))},E=a(299),P=a(284),B=a(161),M=a(298),q=a(11),G=a(10);function V(){return Object(m.jsxs)(P.a,{className:"mr-auto",children:[Object(m.jsxs)(o.c,{className:"text-light mr-3 text-decoration-none",to:"/",children:[Object(m.jsx)(G.a,{icon:q.h})," ",j.a.t("LoggedInOpts:home")]}),Object(m.jsxs)(o.c,{className:"text-light mr-3 text-decoration-none",to:"/invoice/generate",children:[Object(m.jsx)(G.a,{icon:q.m})," ",j.a.t("LoggedInOpts:newInvoice")]}),Object(m.jsxs)(o.c,{className:"text-light mr-3 text-decoration-none",to:"/dashboard",children:[Object(m.jsx)(G.a,{icon:q.c})," ",j.a.t("LoggedInOpts:dashboard")]})]})}function Y(){return Object(m.jsx)(P.a,{className:"mr-auto",children:Object(m.jsxs)(o.c,{className:"text-light mr-3 text-decoration-none",to:"/",children:[Object(m.jsx)(G.a,{icon:q.h})," ",j.a.t("LoggedInOpts:home")]})})}function H(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(M.a.Item,{children:Object(m.jsxs)(o.c,{className:"text-dark text-decoration-none",to:"/profile",children:[Object(m.jsx)(G.a,{icon:q.w,className:"mr-1"})," ",j.a.t("LoggedInOpts:profile")]})}),Object(m.jsx)(M.a.Item,{children:Object(m.jsxs)(o.c,{className:"text-dark text-decoration-none",to:"/logout",children:[Object(m.jsx)(G.a,{icon:q.d,className:"mr-1"})," ",j.a.t("LoggedInOpts:closeSession")]})})]})}function A(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(M.a.Item,{children:Object(m.jsxs)(o.c,{className:"text-dark text-decoration-none",to:"/login",children:[Object(m.jsx)(G.a,{icon:q.v,className:"mr-1"})," ",j.a.t("LoggedOutOpts:login")]})}),Object(m.jsx)(M.a.Item,{children:Object(m.jsxs)(o.c,{className:"text-dark text-decoration-none",to:"/signup",children:[Object(m.jsx)(G.a,{icon:q.x,className:"mr-1"})," ",j.a.t("LoggedOutOpts:signUp")]})})]})}function U(e){var t=e.changeLang,a=Object(n.useContext)(R);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(E.a,{fixed:"top",style:{zIndex:999},bg:"primary",variant:"dark",expand:"lg",children:[Object(m.jsx)(o.c,{to:"/",children:Object(m.jsx)(E.a.Brand,{children:"reciba.app"})}),Object(m.jsx)(E.a.Toggle,{}),Object(m.jsxs)(E.a.Collapse,{children:[a.isLoggedIn?Object(m.jsx)(V,{}):Object(m.jsx)(Y,{}),Object(m.jsxs)(P.a,{className:"ml-auto",children:[Object(m.jsxs)("div",{className:"mr-3",children:[Object(m.jsxs)(B.a,{type:"button",onClick:function(){return t("es")},children:[Object(m.jsx)("img",{src:"https://cdn.countryflags.com/thumbs/spain/flag-400.png",alt:"spanish",width:"15"})," ","ES"]}),Object(m.jsxs)(B.a,{type:"button",onClick:function(){return t("en")},children:[Object(m.jsx)("img",{src:"https://www.countryflags.com/wp-content/uploads/united-kingdom-flag-png-large.png",alt:"english",height:"10"})," ","EN"]})]}),Object(m.jsx)(M.a,{title:"".concat(j.a.t("NavBar:actualUser"),": ").concat(a.isLoggedIn?a.name:j.a.t("NavBar:guest")),id:"collasible-nav-dropdown",children:a.isLoggedIn?Object(m.jsx)(H,{}):Object(m.jsx)(A,{})})]})]})]}),Object(m.jsx)("div",{style:{height:35}})]})}var _=a(63),z=a.n(_),Q=a(84),W=a(47),J=a(286),$=a(285),K=a(164),X=a(295),Z=a(287),ee=a(288),te=a(74),ae=a.n(te),ne=a(162),ce=a.n(ne),re=a(294),se=a(163),oe=a.n(se);function ie(e){var t=e.show,a=void 0===t||t,n=e.onHide,c=void 0===n?function(){return!a}:n,r=e.currentId,s=void 0===r?"Error":r;return Object(m.jsx)(re.a,{size:"xl",show:a,onHide:c,children:Object(m.jsxs)(re.a.Body,{children:[Object(m.jsx)($.a,{children:Object(m.jsx)(K.a,{children:Object(m.jsx)("p",{className:"lead text-center",children:j.a.t("QR:body")})})}),Object(m.jsxs)($.a,{className:"my-5 d-flex align-items-center justify-content-center",children:[Object(m.jsx)(K.a,{}),Object(m.jsx)(K.a,{className:"".concat(oe.a.qrcode," w-auto qrcode bg-white shadow rounded p-3 text-center"),children:Object(m.jsx)(ce.a,{size:200,value:"".concat(D,"#/signature/").concat(s)})}),Object(m.jsx)(K.a,{})]}),Object(m.jsx)($.a,{children:Object(m.jsx)(K.a,{className:"text-center",children:Object(m.jsxs)("small",{children:[j.a.t("QR:alternative")," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(D,"#/signature/").concat(s),children:"".concat(D,"#/signature/").concat(s)})]})})}),Object(m.jsx)($.a,{children:Object(m.jsxs)(K.a,{className:"text-center",children:[Object(m.jsxs)("p",{className:"lead",children:[j.a.t("QR:finishing")," "]}),Object(m.jsxs)(B.a,{onClick:c,children:[Object(m.jsx)(G.a,{icon:q.t})," ",j.a.t("QR:close")]})]})})]})})}var de,le,je=["cash","transfer","check","creditcard"];function ue(){var e=(new Date).toISOString().substr(0,10),t=localStorage.getItem("bill-token")?{headers:{auth:localStorage.getItem("bill-token")}}:void 0,a=Object(f.h)().id,c=Object(n.useContext)(y).generateId,r=Object(n.useContext)(R).isLoggedIn,s=Object(n.useState)({invoiceNumber:1,date:e,from:"",amountText:"",amount:0,concept:"",currency:"ARS",pending:!1,sign:"",payment:"cash",transactionNumber:void 0}),o=Object(l.a)(s,2),d=o[0],u=o[1],b=Object(n.useState)(!1),h=Object(l.a)(b,2),O=h[0],p=h[1],g=Object(n.useState)(!1),x=Object(l.a)(g,2),v=x[0],w=x[1],N=Object(n.useState)(!1),S=Object(l.a)(N,2),D=S[0],L=S[1],T=Object(f.g)(),F=function(e){var t=e.target,a=t.name,n=t.value,c=t.type,r=t.checked,s="checkbox"===c?r:n;u(Object(I.a)(Object(I.a)({},d),{},Object(W.a)({},a,s)))};Object(n.useEffect)((function(){return de=ae()(k),a&&C.a.get("".concat(k,"api/invoice/single/").concat(a)).then((function(e){var t=e.data,a=t.data.date.substr(0,10);u(Object(I.a)(Object(I.a)({},t.data),{},{date:a}))})),de.on("close",(function(){w(!1),i.notify.show(j.a.t("GenerateInvoice:phoneConnected"),"success")})),de.on("sign",(function(e){u((function(t){return Object(I.a)(Object(I.a)({},t),{},{sign:e,pending:!1})}))})),function(){de.disconnect(),le=""}}),[k]);var E=function(){var e=Object(Q.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le||(le=c(),de.emit("join",le)),w((function(e){return!e}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(J.a,{className:"h-100-minus",children:[Object(m.jsx)(ie,{currentId:le,show:v,onHide:function(){w((function(e){return!e}))}}),Object(m.jsx)($.a,{className:"h-100-minus align-items-center",children:Object(m.jsx)(K.a,{className:"bg-light p-3 shadow rounded",children:Object(m.jsxs)(X.a,{noValidate:!0,validated:O,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),L(!0);var n=e.currentTarget;return d.sign||d.pending?(!1===n.checkValidity()?i.notify.show(j.a.t("GenerateInvoice:verifyForm"),"error"):a?C.a.put("".concat(k,"api/invoice/edit/").concat(a),Object(I.a)(Object(I.a)({},d),{},{pending:""===d.sign}),{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){var t=e.data;t.success&&t.data._id&&T.push(d.pending?"/dashboard":"/invoice/display/".concat(t.data._id,"/").concat(le)),i.notify.show(t.message,"success"),L(!1)})).catch((function(e){i.notify.show(j.a.t("GenerateInvoice:errorCreatingInvoice"),"error"),L(!1)})):C.a.post("".concat(k,"api/invoice/"),Object(I.a)({},d),t).then((function(e){var t=e.data;t.id&&T.push(d.pending?"/dashboard":"/invoice/display/".concat(t.id,"/").concat(le)),i.notify.show(t.message,"success"),L(!1)})).catch((function(e){i.notify.show(j.a.t("GenerateInvoice:errorCreatingInvoice"),"error"),L(!1)})),p(!0),!1):(i.notify.show(j.a.t("GenerateInvoice:signatureNeeded"),"error"),L(!1),null)},children:[Object(m.jsx)($.a,{children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Invoice:date")}),Object(m.jsx)(X.a.Control,{required:!0,name:"date",onChange:F,value:d.date.toString(),type:"date"}),Object(m.jsx)(X.a.Control.Feedback,{type:"invalid",children:j.a.t("GIError:date")})]})})}),Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{md:"3",children:Object(m.jsx)("p",{className:"text-center",children:j.a.t("Invoice:received")})}),Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Invoice:from")}),Object(m.jsx)(X.a.Control,{required:!0,name:"from",onChange:F,value:d.from,type:"text"})]})})]}),Object(m.jsx)($.a,{children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Invoice:quantity")}),Object(m.jsx)(X.a.Control,{required:!0,name:"amountText",onChange:F,value:d.amountText,type:"text"})]})})}),Object(m.jsx)($.a,{children:Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Invoice:inConceptOf")}),Object(m.jsx)(X.a.Control,{required:!0,name:"concept",onChange:F,value:d.concept,type:"text"})]})})}),Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{sm:12,md:3,children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Invoice:quantity")}),Object(m.jsxs)(Z.a,{children:[Object(m.jsx)(Z.a.Prepend,{children:Object(m.jsx)(Z.a.Text,{children:Object(m.jsxs)("select",{name:"currency",onChange:F,value:d.currency,className:"no-decoration",children:[Object(m.jsx)("option",{children:"ARS"}),Object(m.jsx)("option",{children:"USD"})]})})}),Object(m.jsx)(X.a.Control,{required:!0,name:"amount",onChange:F,value:d.amount,min:1,type:"decimal"})]})]})}),Object(m.jsx)(K.a,{className:"text-right",children:Object(m.jsxs)("p",{className:"lead",children:[j.a.t("Invoice:signature"),":"]})}),Object(m.jsx)(K.a,{children:d.sign?Object(m.jsx)("img",{height:"100",src:d.sign,className:"signature",alt:j.a.t("Invoice:signature")}):null})]}),Object(m.jsxs)($.a,{className:"d-flex align-items-center justify-content-center",children:[Object(m.jsx)(K.a,{children:Object(m.jsx)("div",{className:"border border-gray p-3",children:je.map((function(e){return Object(m.jsx)(X.a.Check,{className:"mx-3",inline:!0,type:"radio",label:j.a.t("Radio:".concat(e)),checked:d.payment===e,onChange:function(){return u(Object(I.a)(Object(I.a)({},d),{},{payment:e}))}})}))})}),Object(m.jsx)(K.a,{md:"5",children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("GenerateInvoice:transactionNumber")}),Object(m.jsx)(X.a.Control,{name:"transactionNumber",onChange:F,value:d.transactionNumber,type:"text"})]})})]}),Object(m.jsx)($.a,{children:Object(m.jsxs)(K.a,{className:"d-flex align-items-center justify-content-end flex-column flex-md-row text-md-right text-center",children:[r?Object(m.jsx)("fieldset",{className:"mt-3 mt-md-0 w-100 mx-3 py-1 px-2 border border-gray rounded",children:Object(m.jsxs)("label",{htmlFor:"pending",className:"m-0 p-0",children:[Object(m.jsx)("input",{id:"pending",type:"checkbox",name:"pending",checked:d.pending,onChange:F,className:"mr-1 p-0 m-0"}),j.a.t("GenerateInvoice:markAsPending")]})}):null,Object(m.jsxs)(B.a,{variant:"info",onClick:E,className:"mt-3 mt-md-0 w-100 mx-3",children:[Object(m.jsx)(G.a,{icon:q.o})," ",j.a.t("GenerateInvoice:QR")]}),Object(m.jsxs)(B.a,{disabled:D,variant:"secondary",className:"mt-3 mt-md-0 w-100 mx-3",onClick:function(){T.goBack()},children:[Object(m.jsx)(G.a,{icon:q.t})," ",j.a.t("GenerateInvoice:cancel")]}),Object(m.jsxs)(B.a,{className:"mt-3 mt-md-0 w-100 mx-3",disabled:D,variant:"primary",type:"submit",children:[D?Object(m.jsx)(ee.a,{size:"sm",animation:"border"}):Object(m.jsx)(G.a,{icon:q.p})," ",j.a.t("GenerateInvoice:save")]})]})})]})})})]})}var be=a(300),me=a(304);function he(e){return e.toString().substr(0,10)}function Oe(e){var t=e.submitFilter,a=e.isLoading,c=e.setIsLoading,r=Object(n.useState)({from:"",to:"",tags:"",type:""}),s=Object(l.a)(r,2),o=s[0],i=s[1],d=function(e){var t=e.target,a=t.name,n=t.value;i(Object(I.a)(Object(I.a)({},o),{},Object(W.a)({},a,n)))};return Object(m.jsx)(K.a,{className:"bg-white rounded shadow p-3 mb-3",children:Object(m.jsx)(be.a,{children:Object(m.jsxs)(me.a,{children:[Object(m.jsxs)(be.a.Toggle,{as:me.a.Header,eventKey:"0",children:[j.a.t("Filter:filter")," ",o.from||o.to?Object(m.jsx)("small",{className:"text-muted border rounded p-1",children:"".concat(o.from?"".concat(j.a.t("Filter:from"),": ").concat(b()(he(o.from)).format("L")):""," ").concat(o.to?"".concat(j.a.t("Filter:to"),": ").concat(b()(he(o.to)).format("L")):"")}):Object(m.jsx)("small",{className:"text-muted border rounded p-1",children:"".concat(j.a.t("Filter:title")," ").concat(Intl.DateTimeFormat(navigator.language,{month:"long"}).format(new Date))})]}),Object(m.jsx)(be.a.Collapse,{eventKey:"0",children:Object(m.jsx)(me.a.Body,{children:Object(m.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),c(!0),t({from:o.from?b()(o.from).startOf("day").format("YYYY-MM-DD"):"undefined",to:o.to?b()(o.to).endOf("day").format("YYYY-MM-DD"):"undefined",tags:o.tags,type:o.type})},children:[Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Filter:tag")}),Object(m.jsx)(X.a.Control,{name:"tags",value:o.tags,onChange:d,type:"text"})]})}),Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Filter:from")}),Object(m.jsx)(X.a.Control,{type:"date",onChange:d,name:"from",value:o.from})]})}),Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Filter:to")}),Object(m.jsx)(X.a.Control,{type:"date",onChange:d,name:"to",value:o.to})]})}),Object(m.jsx)(K.a,{children:Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Filter:payment")}),Object(m.jsxs)(X.a.Control,{onChange:d,name:"type",value:o.type,as:"select",children:[Object(m.jsx)("option",{value:"",children:j.a.t("Filter:all")}),je.map((function(e){return Object(m.jsx)("option",{value:e,children:j.a.t("Radio:".concat(e))})}))]})]})})]}),Object(m.jsx)($.a,{children:Object(m.jsxs)(K.a,{className:"d-flex justify-content-end w-100",children:[Object(m.jsxs)(B.a,{disabled:a,className:"mr-3",variant:"success",type:"submit",children:[Object(m.jsx)(G.a,{icon:q.q})," ",j.a.t("Filter:search")]}),Object(m.jsxs)(B.a,{disabled:a,onClick:function(){c(!0),t({}),i({from:"",to:"",tags:"",type:""})},variant:"danger",children:[Object(m.jsx)(G.a,{icon:q.t})," ",j.a.t("Filter:cleanSearch")]})]})})]})})})]})})})}var pe=a(106),ge=a(305),xe=a(289),fe=a(301),ve=a(290);function ye(){return Object(m.jsx)(J.a,{children:Object(m.jsxs)($.a,{style:{height:"65vh"},children:[Object(m.jsx)(K.a,{}),Object(m.jsxs)(K.a,{md:2,className:"my-auto shadow bg-light rounded py-4",children:[Object(m.jsx)("div",{className:"m-auto",style:{width:"4rem",height:"4rem"},children:Object(m.jsx)("div",{className:"spinner"})}),Object(m.jsxs)("h1",{className:"mt-3 lead text-gray text-center",children:[j.a.t("LoadingScreen:text"),"..."]})]}),Object(m.jsx)(K.a,{})]})})}var we=a(165);function Ie(e){var t=e.show,a=e.handleClose,c=e.invoiceId,r=e.prevTags,s=e.refreshData,o=Object(n.useState)(""),d=Object(l.a)(o,2),u=d[0],b=d[1];Object(n.useEffect)((function(){r!==[]&&b(r?r.toString():"")}),[c]);return Object(m.jsx)(re.a,{show:t,onHide:a,children:Object(m.jsxs)(X.a,{onSubmit:function(e){e.preventDefault();var t,n=u.split(","),r=[],o=Object(we.a)(n);try{for(o.s();!(t=o.n()).done;){var d=t.value;r.push(d.trim())}}catch(l){o.e(l)}finally{o.f()}!function(e){if(""===c)throw Error("No hay invoice id especificado");C.a.put("".concat(k,"api/invoice/edit/").concat(c),{tags:e},{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){e.data,i.notify.show("Datos guardados","success"),s(),a()})).catch((function(e){i.notify.show(e.message,"error")}))}(r)},children:[Object(m.jsx)(re.a.Header,{closeButton:!0,children:Object(m.jsx)(re.a.Title,{children:j.a.t("Tags:title")})}),Object(m.jsx)(re.a.Body,{children:Object(m.jsxs)(X.a.Group,{controlId:"formBasicEmail",children:[Object(m.jsx)(X.a.Label,{children:j.a.t("Tags:label")}),Object(m.jsx)(X.a.Control,{type:"text",value:u,onChange:function(e){return b(e.target.value)},placeholder:j.a.t("Tags:placeholder")})]})}),Object(m.jsxs)(re.a.Footer,{children:[Object(m.jsxs)(B.a,{variant:"secondary",onClick:a,children:[Object(m.jsx)(G.a,{icon:q.t})," ",j.a.t("Tags:close")]}),Object(m.jsxs)(B.a,{variant:"primary",type:"submit",children:[Object(m.jsx)(G.a,{icon:q.p})," ",j.a.t("Tags:save")]})]})]})})}var Ne=function(e){var t=e.resetData,a=e.show,c=e.data,r=Object(n.useState)(""),s=Object(l.a)(r,2),o=s[0],d=s[1],u=Object(n.useState)(!1),b=Object(l.a)(u,2),h=b[0],O=b[1];return Object(m.jsxs)(re.a,{size:"xl",show:a,onHide:function(){t(),d("")},children:[Object(m.jsx)(re.a.Header,{closeButton:!0,children:Object(m.jsx)(re.a.Title,{children:j.a.t("Mail:title")})}),Object(m.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),O(!0),""===o?(i.notify.show(j.a.t("Mail:noValue"),"error"),O(!1)):C.a.post("".concat(k,"api/mail/send/signaturePetition/"),{invoiceId:c.invoice,from:c.from,to:o}).then((function(e){e.data.success?(i.notify.show(e.data.message,"success"),O(!1),d(""),t()):(i.notify.show(e.data.message,"warning"),O(!1))})).catch((function(){i.notify.show(j.a.t("Mail:cantSend"),"error"),O(!1)}))},children:[Object(m.jsx)(re.a.Body,{children:Object(m.jsxs)(X.a.Group,{controlId:"formBasicEmail",children:[Object(m.jsxs)(X.a.Label,{children:[j.a.t("Mail:address"),":"]}),Object(m.jsx)(X.a.Control,{type:"email",value:o,onChange:function(e){return d(e.target.value)}}),Object(m.jsxs)(X.a.Text,{className:"d-none d-sm-block text-muted",children:[j.a.t("Mail:linkText"),":"," ",Object(m.jsx)("a",{href:"".concat(D,"#/offlinesignature/").concat(c.invoice),children:"".concat(D,"#/offlinesignature/").concat(c.invoice)})]})]})}),Object(m.jsxs)(re.a.Footer,{children:[Object(m.jsxs)(B.a,{disabled:h,onClick:function(){t(),d("")},variant:"secondary",children:[Object(m.jsx)(G.a,{icon:q.t})," ",j.a.t("Mail:close")]}),Object(m.jsxs)(B.a,{disabled:h,type:"submit",variant:"primary",children:[Object(m.jsx)(G.a,{icon:q.j})," ",h?j.a.t("Mail:loading"):j.a.t("Mail:send")]})]})]})]})};function Se(e){var t=e.completed,a=e.pending,c=e.deleteBill,r=e.refreshData,s=e.isLoading,o=Object(f.g)(),i=Object(n.useState)({invoice:"",from:""}),d=Object(l.a)(i,2),u=d[0],h=d[1],O=Object(n.useState)(!1),p=Object(l.a)(O,2),g=p[0],x=p[1],v=Object(n.useState)({id:"",prevTags:[]}),y=Object(l.a)(v,2),w=y[0],I=y[1],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];I({id:e,prevTags:t}),x((function(e){return!e}))};return s?Object(m.jsx)(ye,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ne,{resetData:function(){h({invoice:"",from:""}),r({from:"",to:"",tags:""})},show:""!==u.invoice&&""!==u.from,data:u}),Object(m.jsx)(Ie,{show:g,handleClose:function(){return N()},invoiceId:w.id,prevTags:w.prevTags,refreshData:function(){return r({})}}),Object(m.jsxs)(K.a,{className:"bg-white rounded shadow p-3 mb-3",children:[Object(m.jsx)("small",{className:"text-muted",children:"".concat(j.a.t("Invoices:pending")," - ").concat(a.length)}),Object(m.jsx)(ge.a,{children:a.map((function(e){var t,a,n;return Object(m.jsx)(ge.a.Item,{children:Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{md:"2",children:b()(he(e.date)).format("L")}),Object(m.jsxs)(K.a,{children:[e.from," ",Object(m.jsxs)("small",{children:["(",e.currency," $",e.amount," -"," ",j.a.t("Radio:".concat(e.payment)),")"]}),null===(t=e.tags)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(xe.a,{variant:"info",className:"ml-1",children:e},Math.random())}))," ",(null===(a=e.alreadySent)||void 0===a?void 0:a.isAlreadySent)?Object(m.jsx)(fe.a,{placement:"top",overlay:Object(m.jsx)(ve.a,{id:"mail-already-sent",children:"".concat(j.a.t("Invoices:mail"),": ").concat(null===(n=e.alreadySent)||void 0===n?void 0:n.emailAddress)}),children:Object(m.jsx)(G.a,{icon:pe.a,style:{color:"#6DB65B"}})}):null]}),Object(m.jsxs)(K.a,{md:"2",className:"text-right text-primary",children:[Object(m.jsx)(G.a,{icon:q.s,className:"pointer",onClick:function(){return N(e._id,e.tags)}}),Object(m.jsx)(G.a,{onClick:function(){return o.push("/invoice/edit/".concat(e._id,"/"))},className:"pointer mx-3",icon:q.k}),Object(m.jsx)(G.a,{onClick:function(){return c(e._id)},className:"pointer mr-3",icon:q.u}),Object(m.jsx)(G.a,{className:"pointer",onClick:function(){return h({invoice:e._id?e._id:"",from:e.from})},icon:q.j})]})]})},Math.random())}))}),Object(m.jsx)("hr",{}),Object(m.jsx)("small",{className:"text-muted",children:"".concat(j.a.t("Invoices:completed")," - ").concat(t.length)}),Object(m.jsx)(ge.a,{children:t.map((function(e){var t;return Object(m.jsxs)(ge.a.Item,{children:[Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{md:"2",children:b()(he(e.date)).format("L")}),Object(m.jsxs)(K.a,{children:[e.from," ",Object(m.jsxs)("small",{children:["(",e.currency," $",e.amount," -"," ",j.a.t("Radio:".concat(e.payment)),")"]}),null===(t=e.tags)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(xe.a,{variant:"info",className:"ml-1",children:e},Math.random())}))," "]}),Object(m.jsxs)(K.a,{md:"2",className:"text-right text-primary",children:[Object(m.jsx)(G.a,{className:"pointer",icon:q.s,onClick:function(){return N(e._id,e.tags)}}),Object(m.jsx)(G.a,{onClick:function(){return o.push("/invoice/edit/".concat(e._id,"/"))},className:"ml-3 pointer",icon:q.k}),Object(m.jsx)(G.a,{onClick:function(){return o.push("/invoice/display/".concat(e._id,"/no"))},icon:q.n,className:"mx-3 pointer"}),Object(m.jsx)(G.a,{onClick:function(){return c(e._id)},className:"pointer",icon:q.u})]})]})," "]},Math.random())}))})]})]})}function Ce(){var e=Object(f.g)(),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)([]),o=Object(l.a)(s,2),d=o[0],u=o[1],b=Object(n.useState)(!0),h=Object(l.a)(b,2),O=h[0],p=h[1],g={headers:{auth:localStorage.getItem("bill-token")}},x=function(t){var a=C.a.get("".concat(k,"api/invoice/completed?from=").concat(t.from,"&to=").concat(t.to,"&tags=").concat(t.tags,"&types=").concat(t.type),g),n=C.a.get("".concat(k,"api/invoice/pending?from=").concat(t.from,"&to=").concat(t.to,"&tags=").concat(t.tags,"&types=").concat(t.type),g);C.a.all([a,n]).then(C.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];u(t[0].data.data),r(t[1].data.data),p(!1)}))).catch((function(t){i.notify.show(j.a.t("Dashboard:queryError"),"error"),e.push("/")}))};return Object(n.useEffect)((function(){p(!0),x({})}),[]),Object(m.jsx)(J.a,{className:"my-5",children:Object(m.jsx)($.a,{className:"h-100-minus",children:Object(m.jsxs)(K.a,{children:[Object(m.jsx)(Oe,{isLoading:O,setIsLoading:function(e){return p(e)},submitFilter:function(e){return x(e)}}),Object(m.jsx)(Se,{isLoading:O,refreshData:function(e){return x(e)},deleteBill:function(e){return function(e){void 0!==e&&window.confirm(j.a.t("Dashboard:deleteBill"))&&C.a.delete("".concat(k,"api/invoice/").concat(e),g).then((function(e){e.data.success?(i.notify.show(j.a.t("Dashboard:deleteConfirm"),"success"),x({})):i.notify.show(e.data.message,"warning")})).catch((function(e){i.notify.show(e.response.data.message,"error")}))}(e)},completed:d,pending:c})]})})})}var ke=a(166),De=a.n(ke),Le=[{id:1,type:"text",name:"name"},{id:2,type:"email",name:"email"},{id:3,type:"password",name:"password"},{id:4,type:"password",name:"passwordConfirmation"}];function Re(){var e=Object(f.g)(),t=Object(n.useContext)(R),a=Object(n.useState)({name:"",email:"",password:"",repeatPassword:"",token:""}),c=Object(l.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(!1),d=Object(l.a)(o,2),u=d[0],b=d[1],h=Object(n.useRef)(),O=Object(n.useState)(!1),p=Object(l.a)(O,2),g=p[0],x=p[1],v=function(e){var t=e.target,a=t.name,n=t.value;s(Object(I.a)(Object(I.a)({},r),{},Object(W.a)({},a,n)))};return Object(m.jsx)(J.a,{children:Object(m.jsxs)($.a,{className:"h-100-minus align-items-center",children:[Object(m.jsxs)(K.a,{children:[Object(m.jsx)("h1",{children:j.a.t("Signup:title")}),Object(m.jsx)("p",{className:"lead",children:j.a.t("Signup:body")})]}),Object(m.jsx)(K.a,{className:"bg-light shadow p-3 rounded",children:Object(m.jsxs)(X.a,{noValidate:!0,validated:g,onSubmit:function(a){a.preventDefault(),b(!0);var n=a.currentTarget;r.token?!1===n.checkValidity()?(a.stopPropagation(),i.notify.show(j.a.t("Signup:verifyForm"),"error")):(a.stopPropagation(),C.a.post("".concat(k,"api/user/register"),{email:r.email,password:r.password,name:r.name,token:r.token}).then((function(a){a.data.success?C.a.post("".concat(k,"api/user/login"),{email:r.email,password:r.password}).then((function(a){var n=a.data;n.success?(h.current.resetCaptcha(),t.setUserData({isLoggedIn:!0,token:n.data.token,name:n.data.name}),localStorage.setItem("bill-token",n.data.token),i.notify.show("".concat(n.message),"success"),b(!1),e.push("/")):(i.notify.show(j.a.t("Signup:error"),"error"),b(!1))})).catch((function(e){i.notify.show("".concat(e.response.data.message),"error"),b(!1)})):(i.notify.show("Error: ".concat(a.data.message),"error"),b(!1))})).catch((function(e){try{i.notify.show("".concat(e.response.data.message),"error"),b(!1)}catch(t){i.notify.show("".concat(t.message),"error"),b(!1)}}))):(a.stopPropagation(),i.notify.show(j.a.t("Signup:invalidToken"),"error")),x(!0)},children:[Le.map((function(e){return Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{htmlFor:e.name,children:j.a.t("Signup:".concat(e.name))}),Object(m.jsx)(X.a.Control,{id:e.name,type:e.type,name:e.name,onChange:v,value:r[e.name],required:!0}),Object(m.jsx)(X.a.Control.Feedback,{type:"invalid",children:j.a.t("Signup:".concat(e.name,"Validation"))})]},e.id)})),Object(m.jsxs)(X.a.Group,{"data-testid":"testing",children:[Object(m.jsx)(X.a.Label,{htmlFor:"captcha",children:"Captcha!"}),Object(m.jsx)(De.a,{ref:h,sitekey:L,onVerify:function(e){return s(Object(I.a)(Object(I.a)({},r),{},{token:e}))},onExpire:function(){return s(Object(I.a)(Object(I.a)({},r),{},{token:""}))}})]}),Object(m.jsxs)(B.a,{disabled:u,variant:"primary",type:"submit",children:[u?Object(m.jsx)(ee.a,{animation:"border",size:"sm"}):Object(m.jsx)(G.a,{icon:q.a})," ",j.a.t("Signup:save")]})]})})]})})}var Te=[{id:1,name:"email"},{id:2,name:"password"}];function Fe(){var e=Object(n.useContext)(R).setUserData,t=Object(n.useState)({email:"",password:""}),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),o=Object(l.a)(s,2),d=o[0],u=o[1],b=Object(n.useState)(!1),h=Object(l.a)(b,2),O=h[0],p=h[1],g=Object(f.g)(),x=function(e){var t=e.target,a=t.name,n=t.value;r(Object(I.a)(Object(I.a)({},c),{},Object(W.a)({},a,n)))};return Object(m.jsx)(J.a,{children:Object(m.jsxs)($.a,{className:"h-100-minus align-items-center",children:[Object(m.jsx)(K.a,{}),Object(m.jsx)(K.a,{md:6,sm:12,className:"shadow rounded bg-light p-3",children:Object(m.jsxs)(X.a,{onSubmit:function(t){var a=t.currentTarget;t.preventDefault(),p(!0),!1===a.checkValidity()?(t.stopPropagation(),i.notify.show(j.a.t("Login:verifyData"),"error"),p(!1)):(t.stopPropagation(),C.a.post("".concat(k,"api/user/login"),c).then((function(t){var a=t.data;a.success?(e({isLoggedIn:!0,token:a.data.token,name:a.data.name}),localStorage.setItem("bill-token",a.data.token),i.notify.show("".concat(a.message),"success"),p(!1),g.push("/")):(i.notify.show(j.a.t("Login:error"),"error"),p(!1))})).catch((function(e){var t=e.response?e.response.data.message:e.message;i.notify.show("".concat(t),"error"),p(!1)}))),u(!0)},noValidate:!0,validated:d,children:[Te.map((function(e){return Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{htmlFor:e.name,children:j.a.t("Login:".concat(e.name))}),Object(m.jsx)(X.a.Control,{id:e.name,type:e.name,name:e.name,value:c[e.name],onChange:x,required:!0}),Object(m.jsx)(X.a.Control.Feedback,{type:"invalid",children:j.a.t("Login:".concat(e.name,"Validation"))})]},e.id)})),Object(m.jsxs)(B.a,{disabled:O,variant:"primary",type:"submit",children:[O?Object(m.jsx)(ee.a,{animation:"border",size:"sm"}):Object(m.jsx)(G.a,{icon:q.b})," ",j.a.t("Login:login")]})]})}),Object(m.jsx)(K.a,{})]})})}function Ee(){var e=Object(n.useContext)(R),t=Object(f.g)();return Object(n.useEffect)((function(){localStorage.removeItem("bill-token"),e.setUserData({isLoggedIn:!1,level:9,token:"",name:""})}),[]),Object(m.jsx)(J.a,{children:Object(m.jsx)($.a,{className:"h-100-minus align-items-center",children:Object(m.jsxs)(K.a,{className:"text-center",children:[Object(m.jsxs)("h1",{children:[j.a.t("Logout:title")," ",Object(m.jsx)("span",{role:"img","aria-label":"sad",children:"\ud83d\ude22"})]}),Object(m.jsxs)("p",{children:[" ",j.a.t("Logout:body")]}),Object(m.jsx)(B.a,{className:"mt-5",onClick:function(){return t.push("/")},children:j.a.t("Logout:goBack")})]})})})}function Pe(){return Object(m.jsx)(J.a,{children:Object(m.jsxs)($.a,{className:"h-100-minus align-items-center text-center text-md-left",children:[Object(m.jsxs)(K.a,{children:[Object(m.jsxs)("h1",{children:[j.a.t("Home:title")," ",Object(m.jsx)("span",{role:"img","aria-label":"Page",children:"\ud83d\udcc3"})]}),Object(m.jsx)("p",{className:"lead",children:j.a.t("Home:body")}),Object(m.jsx)(o.c,{to:"/invoice/generate",children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(G.a,{icon:q.i})," ",j.a.t("Home:startNow")]})})]}),Object(m.jsxs)(K.a,{className:"text-right d-none d-md-block",children:[Object(m.jsxs)("h6",{children:[j.a.t("Home:currentTime"),":"]}),Object(m.jsx)("h3",{children:b()().format("MMMM Do YYYY, h:mm:ss a")})]})]})})}var Be,Me=a(173),qe=a(296),Ge=a(302);function Ve(e){var t=e.sendEmail,a=e.setRecipient,n=e.recipient,c=e.validated;return Object(m.jsx)(K.a,{className:"px-5 py-3 bg-white shadow rounded",children:Object(m.jsxs)(X.a,{noValidate:!0,onSubmit:t,validated:c,children:[Object(m.jsxs)(X.a.Group,{children:[Object(m.jsx)(X.a.Label,{children:j.a.t("EmailInput:title")}),Object(m.jsx)(X.a.Control,{type:"email",value:n,onChange:a,placeholder:j.a.t("EmailInput:placeholder"),required:!0}),Object(m.jsx)(X.a.Control.Feedback,{type:"invalid",children:j.a.t("EmailInput:error")})]}),Object(m.jsxs)(B.a,{variant:"primary",type:"submit",children:[Object(m.jsx)(G.a,{icon:q.j})," ",j.a.t("EmailInput:send")]})]})})}function Ye(e){var t=e.exportPDFToFile,a=e.transformPDFToBase64,n=e.toggleEmailInput,c=e.hasSocketId;return Object(m.jsxs)(K.a,{className:"p-3 bg-light text-center shadow rounded",children:[Object(m.jsxs)(B.a,{className:"mx-2",onClick:t,children:[Object(m.jsx)(G.a,{icon:q.g})," ",j.a.t("Buttons:download")]}),Object(m.jsxs)(B.a,{disabled:c,className:"mx-2",onClick:a,children:[Object(m.jsx)(G.a,{icon:q.l})," ",j.a.t("Buttons:sendToPhone")]}),Object(m.jsxs)(B.a,{onClick:n,className:"mx-2",children:[Object(m.jsx)(G.a,{icon:q.f})," ",j.a.t("Buttons:sendToMail")]})]})}function He(e){var t=e.isOriginal,a=void 0!==t&&t,n=e.data;return Object(m.jsxs)($.a,{className:"pdf-font my-5 py-5 bg-white border border-black",children:[Object(m.jsxs)(K.a,{md:1,className:"d-flex justify-content-center align-items-center flex-column",children:[n.logo?Object(m.jsx)("img",{src:n.logo,alt:"RollingCode School",height:"50"}):null,Object(m.jsx)("p",{className:"text-muted p-0 mt-auto text-center",style:{},children:a?j.a.t("Invoice:originalInvoice"):j.a.t("Invoice:duplicateInvoice")})]}),Object(m.jsxs)(K.a,{className:"px-5",children:[Object(m.jsxs)($.a,{className:"border-bottom mt-3 pb-3",children:[Object(m.jsxs)(K.a,{children:[Object(m.jsxs)("p",{className:"text-monospace",children:[j.a.t("Invoice:receiptNumber"),": ",n.invoiceNumber]}),Object(m.jsx)("small",{className:"text-monospace",children:n.transactionNumber?"".concat(j.a.t("GenerateInvoice:transactionNumber")," ").concat(n.transactionNumber):null})]}),Object(m.jsx)(K.a,{md:"2"}),Object(m.jsx)(K.a,{className:"text-center",children:Object(m.jsxs)("p",{className:"my-0",children:[Object(m.jsxs)("strong",{children:[j.a.t("Invoice:date"),": "]}),b()(n.date).format("MMMM Do [del] YYYY")]})})]}),Object(m.jsx)($.a,{children:Object(m.jsxs)(K.a,{children:[Object(m.jsxs)($.a,{className:"bg-light my-3",children:[Object(m.jsx)(K.a,{md:3,children:Object(m.jsx)("p",{className:"text-center my-2",children:Object(m.jsx)("strong",{children:j.a.t("Invoice:received")})})}),Object(m.jsx)(K.a,{children:Object(m.jsxs)("p",{className:"my-2",children:[Object(m.jsxs)("strong",{children:[j.a.t("Invoice:from"),": "]}),n.from]})})]}),Object(m.jsx)($.a,{className:"bg-light my-3",children:Object(m.jsx)(K.a,{children:Object(m.jsxs)("p",{className:"my-2",children:[Object(m.jsxs)("strong",{children:[j.a.t("Invoice:quantity"),": "]}),n.amountText]})})}),Object(m.jsx)($.a,{className:"bg-light my-3",children:Object(m.jsx)(K.a,{children:Object(m.jsxs)("p",{className:"my-2",children:[Object(m.jsxs)("strong",{children:[j.a.t("Invoice:inConceptOf"),": "]})," ",n.concept]})})})]})}),Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{md:2,className:"bg-light",children:Object(m.jsxs)("p",{className:"my-2",children:[Object(m.jsx)("strong",{children:"Son: "})," ",n.currency," $",n.amount]})}),Object(m.jsx)(K.a,{}),Object(m.jsx)(K.a,{md:6,className:"bg-light",children:Object(m.jsxs)("p",{className:"my-2",children:[Object(m.jsxs)("strong",{children:[j.a.t("Invoice:receiptBy"),": "]}),Object(m.jsx)("img",{src:n.sign,height:"120",alt:"signature"})]})})]})]})]})}function Ae(){var e=Object(n.useRef)(Object(m.jsx)("div",{})),t=Object(f.h)(),a=t.id,c=t.socketId,r=Object(n.useState)({invoiceNumber:1,logo:"",date:new Date,from:"",amountText:"",amount:0,concept:"",sign:"",currency:"ARS",pending:!1,transactionNumber:void 0}),s=Object(l.a)(r,2),o=s[0],d=s[1],u=Object(n.useState)(!1),b=Object(l.a)(u,2),h=b[0],O=b[1],p=Object(n.useState)(""),g=Object(l.a)(p,2),x=g[0],v=g[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),N=w[0],S=w[1],D=function(){return Object(qe.a)(e.current,{paperSize:"A4",landscape:!0,scale:.75}).then((function(e){return Object(Ge.a)(e)}))},L=function(){var e=Object(Q.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Be,e.next=3,D();case 3:e.t1=e.sent,e.t0.emit.call(e.t0,"pdf",e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(Q.a)(z.a.mark((function e(t){var a,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.currentTarget,e.next=4,D();case 4:n=e.sent,!0===a.checkValidity()&&C.a.post("".concat(k,"api/mail/send/invoice"),{file:n,date:o.date,email:x}).then((function(e){var t=e.data,a=t.success,n=t.message;a?i.notify.show(n,"success"):i.notify.show(n,"error")})).catch((function(e){i.notify.show(j.a.t("DisplayInvoice:error"),"error")})),S(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return Be=ae()(k),C.a.get("".concat(k,"api/invoice/single/").concat(a)).then((function(e){var t=e.data,a=function(e){var t=e.slice(0,10).split("-");return{year:parseInt(t[0]),month:parseInt(t[1],10)-1,date:parseInt(t[2])}}(t.data.date),n=a.year,c=a.month,r=a.date;d(Object(I.a)(Object(I.a)({},t.data),{},{date:new Date(n,c,r)}))})),Be.emit("join",c),function(){Be.off("join")}}),[k]),Object(m.jsxs)(J.a,{children:[Object(m.jsx)($.a,{className:"my-5",children:Object(m.jsx)(Ye,{exportPDFToFile:function(){Object(Me.a)(e.current,{paperSize:"A4",fileName:"Invoice - ".concat(Intl.DateTimeFormat(navigator.language,{month:"numeric",day:"numeric",year:"numeric"}).format(new Date(o.date))," - ").concat(a),landscape:!1,scale:.5})},transformPDFToBase64:L,toggleEmailInput:function(){return O(!h)},hasSocketId:"no"===c})}),Object(m.jsx)($.a,{className:h?"d-block":"d-none",children:Object(m.jsx)(Ve,{recipient:x,sendEmail:function(e){return R(e)},setRecipient:function(e){return v(e.target.value)},validated:N})}),Object(m.jsxs)("div",{ref:e,children:[Object(m.jsx)(He,{data:o,isOriginal:!0}),Object(m.jsx)(He,{data:o})]})]})}function Ue(e){var t=e.show,a=e.handleClose,n=e.PDFFile;return Object(m.jsxs)(re.a,{show:t,onHide:a,children:[Object(m.jsx)(re.a.Header,{closeButton:!0,children:Object(m.jsx)(re.a.Title,{children:j.a.t("DownloadModal:title")})}),Object(m.jsxs)(re.a.Body,{children:[j.a.t("DownloadModal:body")," "]}),Object(m.jsxs)(re.a.Footer,{children:[Object(m.jsxs)(B.a,{variant:"secondary",onClick:a,children:[Object(m.jsx)(G.a,{icon:pe.b})," ",j.a.t("DownloadModal:ignore")]}),Object(m.jsx)("a",{download:"Comprobante.pdf",href:n,children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(G.a,{icon:q.e})," ",j.a.t("DownloadModal:download")]})})]})]})}var _e,ze=a(253);function Qe(){var e=Object(n.useRef)(),t=Object(f.h)(),a=t.socketId,c=t.invoiceId,r=Object(n.useState)(!1),s=Object(l.a)(r,2),o=s[0],d=s[1],u=Object(n.useState)(""),b=Object(l.a)(u,2),h=b[0],O=b[1],p=Object(n.useState)({}),g=Object(l.a)(p,2),x=g[0],v=g[1];Object(n.useEffect)((function(){return a?((_e=ae()(k)).emit("join",a),_e.emit("close",!1),_e.on("pdf",(function(e){O(e),w()}))):c&&C.a.get("".concat(k,"api/invoice/single/").concat(c)).then((function(e){var t=e.data;t.success&&v(t.data)})).catch((function(e){return alert(e.response.data.message)})),function(){a&&_e.off("pdf")}}),[k]);var y=function(){a&&_e.emit("sign",e.current.toDataURL())},w=function(){d(!o)};return Object(m.jsxs)(J.a,{className:"h-100-minus mt-5",children:[Object(m.jsx)(Ue,{PDFFile:h,show:o,handleClose:w}),Object(m.jsx)($.a,{className:c?"d-block":"d-none",children:Object(m.jsxs)(K.a,{className:"text-center",children:[Object(m.jsx)("h1",{children:j.a.t("Signature:greeting")}),Object(m.jsxs)("p",{children:[j.a.t("Signature:received")," ",Object(m.jsx)("strong",{children:x.from})," ",j.a.t("Signature:concept")," ",Object(m.jsx)("strong",{children:x.concept})," ",j.a.t("Signature:amount")," ",Object(m.jsxs)("strong",{children:[x.currency," ",x.amount]})]}),Object(m.jsx)("hr",{})]})}),Object(m.jsx)($.a,{children:Object(m.jsxs)(K.a,{className:"text-center",children:[Object(m.jsx)("p",{className:"lead m-0",children:j.a.t("Signature:sign")}),Object(m.jsx)("small",{className:"text-muted",children:j.a.t("Signature:horizontal")})]})}),Object(m.jsx)($.a,{className:"my-5",children:Object(m.jsx)(K.a,{onTouchEnd:y,onMouseUp:y,className:"bg-white shadow rounded",children:Object(m.jsx)(ze,{ref:e})})}),Object(m.jsxs)($.a,{children:[Object(m.jsx)(K.a,{children:Object(m.jsxs)(B.a,{className:"w-100",variant:"danger",onClick:function(){e.current.clear(),y()},children:[Object(m.jsx)(G.a,{icon:q.t})," ",j.a.t("Signature:reset")]})}),Object(m.jsx)(K.a,{className:c?"d-block":"d-none",children:Object(m.jsxs)(B.a,{className:"w-100",variant:"success",onClick:function(){window.confirm("".concat(j.a.t("Signature:confirm")," ").concat(x.from,"?"))&&C.a.put("".concat(k,"api/invoice/addSignature/").concat(c),Object(I.a)(Object(I.a)({},x),{},{sign:e.current.toDataURL()})).then((function(e){i.notify.show(j.a.t("Signature:success"),"success")})).catch((function(e){var t=e.response?e.response.data.message:e.message;i.notify.show(t,"error")}))},children:[Object(m.jsx)(G.a,{icon:q.r})," ",j.a.t("Signature:send")]})})]}),Object(m.jsx)($.a,{className:a?"d-block my-5 text-center":"d-none",children:Object(m.jsxs)(K.a,{children:[Object(m.jsx)("p",{className:"lead",children:j.a.t("Signature:alert")}),Object(m.jsxs)("p",{children:[j.a.t("Signature:alertBody")," "]})]})})]})}a(158);var We=function(){var e=Object(n.useContext)(h);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(T,{children:Object(m.jsx)(w,{children:Object(m.jsxs)(o.b,{basename:"",children:[Object(m.jsx)(U,{changeLang:function(t){return function(t){e.setLanguage(t)}(t)}}),Object(m.jsxs)(f.d,{children:[Object(m.jsx)(f.b,{path:"/signup",component:Re}),Object(m.jsx)(f.b,{path:"/login",component:Fe}),Object(m.jsx)(f.b,{path:"/logout",component:Ee}),Object(m.jsx)(f.b,{path:"/",exact:!0,component:Pe}),Object(m.jsx)(f.b,{path:"/invoice/generate",component:ue}),Object(m.jsx)(F,{path:"/invoice/edit/:id",render:function(){return Object(m.jsx)(ue,{})}}),Object(m.jsx)(f.b,{path:"/invoice/display/:id/:socketId",component:Ae}),Object(m.jsx)(F,{path:"/dashboard",render:function(){return Object(m.jsx)(Ce,{})}}),Object(m.jsx)(f.b,{path:"/signature/:socketId",component:Qe}),Object(m.jsx)(f.b,{path:"/offlinesignature/:invoiceId",component:Qe}),Object(m.jsx)(f.b,{render:function(){return Object(m.jsx)("div",{children:"Not found"})}})]})]})})})})},Je=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,307)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};a(274),a(275);x.a.tz.setDefault("America/Buenos_Aires"),x.a.locale(localStorage.getItem("i18nextLng")||"en"),s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(O,{children:[Object(m.jsx)(d.a,{options:p}),Object(m.jsx)(We,{})]})})}),document.getElementById("root")),Je(console.log)}},[[276,1,2]]]);
//# sourceMappingURL=main.29e54eec.chunk.js.map
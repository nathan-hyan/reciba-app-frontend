(this["webpackJsonpreciba-app-frontend"]=this["webpackJsonpreciba-app-frontend"]||[]).push([[0],{154:function(e,a,t){"use strict";t.r(a);var n,r=t(2),o=t(272),c=t(164);r.a.use(o.a).use(c.a).init({fallbackLng:localStorage.getItem("i18nextLng")||"en",detection:{order:["localStorage"],cache:["localStorage"]},interpolation:{escapeValue:!1}}),(n=t(250)).keys().map(n)},162:function(e,a,t){e.exports={qrcode:"styles_qrcode__1oduA"}},172:function(e,a,t){e.exports=t(271)},182:function(e,a,t){},183:function(e,a,t){},250:function(e,a,t){var n={"./Layout/LoadingScreen/i18n.ts":251,"./Layout/NavigationBar/i18n.ts":252,"./Pages/Dashboard/components/Filter/i18n.ts":253,"./Pages/Dashboard/components/InvoicesList/i18n.ts":254,"./Pages/Dashboard/components/SendMailModal/i18n.ts":255,"./Pages/Dashboard/components/TagsModal/i18n.ts":256,"./Pages/Dashboard/i18n.ts":257,"./Pages/DisplayInvoice/components/Bill/i18n.ts":258,"./Pages/DisplayInvoice/components/ButtonsGroup/i18n.ts":259,"./Pages/DisplayInvoice/components/EmailInput/i18n.ts":260,"./Pages/DisplayInvoice/i18n.ts":261,"./Pages/GenerateInvoice/components/ShowQRCodeModal/i18n.ts":262,"./Pages/GenerateInvoice/i18n.ts":263,"./Pages/Home/i18n.ts":264,"./Pages/Login/i18n.ts":265,"./Pages/Logout/i18n.ts":266,"./Pages/Signature/components/DownloadModal/i18n.ts":267,"./Pages/Signature/i18n.ts":268,"./Pages/Signup/i18n.ts":269,"./constants/i18n.ts":270,"./utils/i18n.js":154};function r(e){var a=o(e);return t(a)}function o(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=250},251:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","LoadingScreen",{text:"Cargando datos"}),n.a.addResources("en","LoadingScreen",{text:"Loading data"})},252:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","NavBar",{actualUser:"Usuario actual",guest:"Invitado"}),n.a.addResources("en","NavBar",{actualUser:"Current user",guest:"Guest"}),n.a.addResources("es","LoggedInOpts",{home:"Principal",newInvoice:"Nuevo comprobante",dashboard:"Tablero",profile:"Perfil",closeSession:"Cerrar sesi\xf3n"}),n.a.addResources("en","LoggedInOpts",{home:"Home",newInvoice:"New invoice",dashboard:"Dashboard",profile:"Profile",closeSession:"Log out"}),n.a.addResources("es","LoggedOutOpts",{login:"Iniciar sesi\xf3n",signUp:"Crear usuario"}),n.a.addResources("en","LoggedOutOpts",{login:"Log in",signUp:"Sign up"})},253:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Filter",{filter:"Filtro",title:"Mostrando las boletas de",tag:"Etiqueta",from:"Desde",to:"Hasta",search:"Buscar",payment:"Metodo de pago",cleanSearch:"Limpiar b\xfasqueda",all:"Todos los m\xe9todos"}),n.a.addResources("en","Filter",{filter:"Filter",title:"Displaying invoices from",tag:"Tag",from:"Since",to:"To",search:"Search",payment:"Payment type",cleanSearch:"Clean search",all:"All methods"})},254:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Invoices",{pending:"Boletas pendientes",completed:"Boletas finalizadas",mail:"Mail ya enviado a"}),n.a.addResources("en","Invoices",{pending:"Pending invoices",completed:"Completed invoices",mail:"Email already sent to"})},255:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Mail",{noValue:"Debe especificar un mail v\xe1lido",cantSend:"Ocurri\xf3 un error enviando el mail, reintente",title:"Enviar por mail",address:"Direcci\xf3n de correo",linkText:"Tambi\xe9n pod\xe9s copiar este link y pasarlo por privado",close:"Cerrar",loading:"Espere un momento...",send:"Enviar"}),n.a.addResources("en","Mail",{noValue:"You must specify a valid e-mail address",cantSend:"There was an error sending the mail. Please, try again",title:"Send via e-mail",address:"E-mail address",linkText:"You can also copy this link and send it via private message",close:"Close",loading:"Just a moment...",send:"Send"})},256:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Tags",{title:"Agregar etiquetas",label:"Etiquetas separadas por comas",placeholder:"pendiente, seguimiento",close:"Cerrar",save:"Guardar"}),n.a.addResources("en","Tags",{title:"Add tags",label:"Tags separated by commas",placeholder:"pending, person name",close:"Close",save:"Save"})},257:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Dashboard",{queryError:"Ocurri\xf3 un error trayendo los datos",deleteBill:"Advertencia, se borrar\xe1 la boleta. \xbfDesea continuar?",deleteConfirm:"Boleta borrada correctamente"}),n.a.addResources("en","Dashboard",{queryError:"There was an error getting the data",deleteBill:"Warning! The invoice will be deleted. Do you want to continue?",deleteConfirm:"Invoice deleted successfully"})},258:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Invoice",{originalInvoice:"Recibo original",duplicateInvoice:"Recibo duplicado",receiptNumber:"Recibo N\xb0",date:"Fecha",received:"Recib\xed",from:"De",quantity:"La cantidad de",inConceptOf:"En concepto de",receiptBy:"Recibo por",signature:"Firma"}),n.a.addResources("en","Invoice",{originalInvoice:"Original receipt",duplicateInvoice:"Duplicated receipt",receiptNumber:"Invoice number",date:"Date",received:"I received",from:"From",quantity:"Quantity of",inConceptOf:"In concept of",receiptBy:"Receipt by",signtaure:"Signature"})},259:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Buttons",{download:"Descargar PDF",sendToPhone:"Enviar PDF al tel\xe9fono",sendToMail:"Enviar copia por mail"}),n.a.addResources("en","Buttons",{download:"Download PDF",sendToPhone:"Send PDF to phone",sendToMail:"Send a copy via E-mail"})},260:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","EmailInput",{title:"Direcci\xf3n de E-mail",placeholder:"correo@servidor.com",error:"Se necesita un E-mail v\xe1lido",send:"Enviar"}),n.a.addResources("en","EmailInput",{title:"E-mail address",placeholder:"mail@server.com",error:"Enter a valid E-mail address",send:"Send"})},261:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","DisplayInvoice",{error:"Ocurri\xf3 un error"}),n.a.addResources("en","DisplayInvoice",{error:"There was an error"})},262:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","QR",{body:"Escanee el c\xf3digo con el celular para poder firmar en este comprobante",alternative:"Tambi\xe9n puede ingresar ac\xe1 para firmar",finishing:"Al terminar la firma, espere hasta que la otra persona termine",close:"Cerrar"}),n.a.addResources("en","QR",{body:"Scan this code with your phone to sign the invoice",alternative:"You can also enter with this URL",finishing:"When finished, please wait until the other person finishes",close:"Close"})},263:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","GenerateInvoice",{signatureNeeded:"Se necesita la firma para continuar",verifyForm:"Por favor, verifique el formulario y reintente",errorCreatingInvoice:"Ocurri\xf3 un error creando el comprobante. Por favor, reintente",phoneConnected:"Tel\xe9fono conectado",markAsPending:"Marcar para firmar luego",QR:"Mostrar c\xf3digo QR",cancel:"Cancelar",save:"Guardar",transactionNumber:"Numero de transacci\xf3n"}),n.a.addResources("en","GenerateInvoice",{signatureNeeded:"The signature is required to continue",verifyForm:"Please verify the form before continuing",errorCreatingInvoice:"There was an error creating the invoice. Please, retry",phoneConnected:"Phone connected",markAsPending:"Mark as pending",QR:"Show QR code",cancel:"Cancel",save:"Save",transactionNumber:"Transaction number"}),n.a.addResources("es","GIError",{date:"La fecha es necesaria"}),n.a.addResources("es","GIError",{date:"The date is required"}),n.a.addResources("es","Radio",{cash:"Efectivo",check:"Cheque",creditcard:"Tarjeta de cr\xe9dito",transfer:"Transferencia"}),n.a.addResources("en","Radio",{cash:"Cash",check:"Check",creditcard:"Credit card",transfer:"Bank Transfer"})},264:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Home",{title:"Basta de usar papel para tus comprobantes",body:"\xa1Ahora pod\xe9s hacer todo digital! Cre\xe1, guard\xe1, envi\xe1 comprobantes desde tu casa sin necesidad de contacto f\xedsico.",startNow:"\xa1Comenz\xe1 ahora!",currentTime:"Hora actual"}),n.a.addResources("en","Home",{title:"Stop using paper for your invoices",body:"\xa1Now you can do everything digitally! Create, save and send invoices from your house without the need of contact.",startNow:"\xa1Start now!",currentTime:"Current time"})},265:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Login",{verifyData:"Por favor, verifique los datos antes de continuar",error:"Ocurri\xf3 un error. Por favor, reintente",email:"Direcci\xf3n de E-mail",emailValidation:"Por favor, ingrese un E-mail v\xe1lido",password:"Contrase\xf1a",passwordValidation:"Por favor, ingrese su contrase\xf1a",login:"Iniciar sesi\xf3n"}),n.a.addResources("en","Login",{verifyData:"Please, verify the form before continuing",error:"There was an error. Please, retry",email:"E-mail address",emailValidation:"Please, enter a valid E-mail",password:"Password",passwordValidation:"Please, enter your password",login:"Log in"})},266:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Logout",{title:"Qu\xe9 l\xe1stima verte partir",body:"\xa1Ojal\xe1 podamos volverte a ver pronto!",goBack:"Volver a la p\xe1gina principal"}),n.a.addResources("en","Logout",{title:"It's sad to see you go",body:"We wish to see you soon again!",goBack:"Go back home"})},267:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","DownloadModal",{title:"\xa1Comprobante listo!",body:"Su comprobante ha sido generado con \xe9xito. \xbfDesea descargar una copia?",ignore:"Ignorar",download:"Descargar comprobante"}),n.a.addResources("en","DownloadModal",{title:"Invoice ready!",body:"Your invoice is ready! Wish to download a copy?",ignore:"Ignore",download:"Download"})},268:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Signature",{confirm:"\xbfConfirma el env\xedo de la firma a",success:"Se ha firmado correctamente. Ya puede salir de la App",greeting:"\xa1Hola!",received:"Recibi\xf3 esta boleta de",concept:"con el concepto de",amount:"por el momnto de",sign:"Firme en el campo en blanco para continuar",horizontal:"Coloque el tel\xe9fono de forma horizontal para mejor resultado",reset:"Reiniciar firma",send:"Enviar firma",alert:"\xa1No cierre esta p\xe1gina!",alertBody:"Cuando se genere el comprobante, aparecer\xe1 un bot\xf3n para descargar una copia"}),n.a.addResources("en","Signature",{confirm:"Do you really want to send this signature to",success:"Invoice signed correctly. You can now close this window",greeting:"Hello!",received:"You received this invoice from",concept:"with the concept of",amount:"by the amount of",sign:"Sign in the white letterbox",horizontal:"For a better result, turn your phone in landscape mode",reset:"Reset signature",send:"Send",alert:"Don't close this window!",alertBody:"When the invoice is completed, there will be a button to download a copy"})},269:function(e,a,t){"use strict";t.r(a);var n=t(2);n.a.addResources("es","Signup",{verifyForm:"Por favor, verifique los datos antes de continuar",error:"Ocurri\xf3 un error. Reintente, por favor.",title:"\xa1Registrese para obtener m\xe1s beneficios!",body:"Guardar comprobantes, marcar para firmarlos luego y envie por mail! Todos estos beneficios y m\xe1s siendo miembro premium.",name:"Nombre",nameValidation:"El nombre es requerido",email:"Direcci\xf3n de E-mail",emailValidation:"La direcci\xf3n de E-mail es requerida",password:"Contrase\xf1a",passwordValidation:"La contrase\xf1a es requerida",passwordConfirmation:"Repita la contrase\xf1a",passwordConfirmationValidation:"Es necesario que repita la contrase\xf1a correctamente",save:"Guardar",invalidToken:"Por favor, verifique el Captcha antes de continuar"}),n.a.addResources("en","Signup",{verifyForm:"Please, verify the data before continuing",error:"There was an error. Please, retry",title:"Register in order to get more benefits!",body:"Save benefits, mark them as pending and send them via e-mail! All of this and more benefits by becoming a premium member.",name:"Name",nameValidation:"The name is required",email:"E-mail address",emailValidation:"E-mail address is required",password:"Password",passwordValidation:"Password is required",passwordConfirmation:"Repeat password",passwordConfirmationValidation:"Is necessary that both passwords are the same",save:"Save",invalidToken:"Please, verify the Captcha before continuing"})},270:function(e,a,t){"use strict";t.r(a),t(2).a.addResources("es","Global",{send:"Enviar",close:"Cerrar",save:"Guardar"})},271:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(26),c=t.n(o),l=t(14),i=t(11),s=t.n(i),m=(t(182),t(183),t(184),t(121)),u=t.n(m),d=t(12),p=t(2),g=t(27),f=t.n(g),E=Object(n.createContext)({language:localStorage.getItem("i18nextLng"),setLanguage:function(){}});function v(e){var a=e.children,t=Object(n.useState)(localStorage.getItem("i18nextLng")),o=Object(d.a)(t,2),c=o[0],l=o[1];return p.a.on("languageChanged",(function(e){f.a.locale(e)})),r.a.createElement(E.Provider,{value:{language:c,setLanguage:function(e){p.a.changeLanguage(e||"es"),l(e)}}},a)}var h=t(15),b=t.n(h),y=t(281),w=t(280),O=t(155),I=t(22),N="https://recibapp.herokuapp.com/",j="https://reciba.app/",S="be3fd67b-1a61-4936-b57f-600e3765988f",C=t(46),k=t(13),x=t(10),D=t(9),L=t(296),R=t(301),T=t(291),P=t(156),F=["cash","transfer","check","creditcard"];function B(e){return e.toString().substr(0,10)}function M(e){var a=e.submitFilter,t=e.isLoading,o=e.setIsLoading,c=Object(n.useState)({from:"",to:"",tags:"",type:""}),l=Object(d.a)(c,2),i=l[0],s=l[1],m=function(e){var a=e.target,t=a.name,n=a.value;s(Object(k.a)(Object(k.a)({},i),{},Object(C.a)({},t,n)))};return r.a.createElement(O.a,{className:"bg-white rounded shadow p-3 mb-3"},r.a.createElement(L.a,null,r.a.createElement(R.a,null,r.a.createElement(L.a.Toggle,{as:R.a.Header,eventKey:"0"},p.a.t("Filter:filter")," ",i.from||i.to?r.a.createElement("small",{className:"text-muted border rounded p-1"},"".concat(i.from?"".concat(p.a.t("Filter:from"),": ").concat(f()(B(i.from)).format("L")):""," ").concat(i.to?"".concat(p.a.t("Filter:to"),": ").concat(f()(B(i.to)).format("L")):"")):r.a.createElement("small",{className:"text-muted border rounded p-1"},"".concat(p.a.t("Filter:title")," ").concat(Intl.DateTimeFormat(navigator.language,{month:"long"}).format(new Date)))),r.a.createElement(L.a.Collapse,{eventKey:"0"},r.a.createElement(R.a.Body,null,r.a.createElement(T.a,{onSubmit:function(e){e.preventDefault(),o(!0),a({from:i.from?f()(i.from).startOf("day").format("YYYY-MM-DD"):"undefined",to:i.to?f()(i.to).endOf("day").format("YYYY-MM-DD"):"undefined",tags:i.tags,type:i.type})}},r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Filter:tag")),r.a.createElement(T.a.Control,{name:"tags",value:i.tags,onChange:m,type:"text"}))),r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Filter:from")),r.a.createElement(T.a.Control,{type:"date",onChange:m,name:"from",value:i.from}))),r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Filter:to")),r.a.createElement(T.a.Control,{type:"date",onChange:m,name:"to",value:i.to}))),r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Filter:payment")),r.a.createElement(T.a.Control,{onChange:m,name:"type",value:i.type,as:"select"},r.a.createElement("option",{value:""},p.a.t("Filter:all")),F.map((function(e){return r.a.createElement("option",{value:e},p.a.t("Radio:".concat(e)))})))))),r.a.createElement(w.a,null,r.a.createElement(O.a,{className:"d-flex justify-content-end w-100"},r.a.createElement(P.a,{disabled:t,className:"mr-3",variant:"success",type:"submit"},r.a.createElement(D.a,{icon:x.q})," ",p.a.t("Filter:search")),r.a.createElement(P.a,{disabled:t,onClick:function(){o(!0),a({}),s({from:"",to:"",tags:"",type:""})},variant:"danger"},r.a.createElement(D.a,{icon:x.t})," ",p.a.t("Filter:cleanSearch"))))))))))}var G=t(102),q=t(302),V=t(282),Y=t(297),A=t(283);function H(){return r.a.createElement(y.a,null,r.a.createElement(w.a,{style:{height:"65vh"}},r.a.createElement(O.a,null),r.a.createElement(O.a,{md:2,className:"my-auto shadow bg-light rounded py-4"},r.a.createElement("div",{className:"m-auto",style:{width:"4rem",height:"4rem"}},r.a.createElement("div",{className:"spinner"})),r.a.createElement("h1",{className:"mt-3 lead text-gray text-center"},p.a.t("LoadingScreen:text"),"...")),r.a.createElement(O.a,null)))}var U=t(157),_=t(290);function z(e){var a=e.show,t=e.handleClose,o=e.invoiceId,c=e.prevTags,l=e.refreshData,s=Object(n.useState)(""),m=Object(d.a)(s,2),u=m[0],g=m[1];Object(n.useEffect)((function(){c!==[]&&g(c?c.toString():"")}),[o]);return r.a.createElement(_.a,{show:a,onHide:t},r.a.createElement(T.a,{onSubmit:function(e){e.preventDefault();var a,n=u.split(","),r=[],c=Object(U.a)(n);try{for(c.s();!(a=c.n()).done;){var s=a.value;r.push(s.trim())}}catch(m){c.e(m)}finally{c.f()}!function(e){if(""===o)throw Error("No hay invoice id especificado");b.a.put("".concat(N,"api/invoice/edit/").concat(o),{tags:e},{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){e.data;i.notify.show("Datos guardados","success"),l(),t()})).catch((function(e){i.notify.show(e.message,"error")}))}(r)}},r.a.createElement(_.a.Header,{closeButton:!0},r.a.createElement(_.a.Title,null,p.a.t("Tags:title"))),r.a.createElement(_.a.Body,null,r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,p.a.t("Tags:label")),r.a.createElement(T.a.Control,{type:"text",value:u,onChange:function(e){return g(e.target.value)},placeholder:p.a.t("Tags:placeholder")}))),r.a.createElement(_.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:t},r.a.createElement(D.a,{icon:x.t})," ",p.a.t("Tags:close")),r.a.createElement(P.a,{variant:"primary",type:"submit"},r.a.createElement(D.a,{icon:x.p})," ",p.a.t("Tags:save")))))}var Q=function(e){var a=e.resetData,t=e.show,o=e.data,c=Object(n.useState)(""),l=Object(d.a)(c,2),s=l[0],m=l[1],u=Object(n.useState)(!1),g=Object(d.a)(u,2),f=g[0],E=g[1];return r.a.createElement(_.a,{size:"xl",show:t,onHide:function(){a(),m("")}},r.a.createElement(_.a.Header,{closeButton:!0},r.a.createElement(_.a.Title,null,p.a.t("Mail:title"))),r.a.createElement(T.a,{onSubmit:function(e){e.preventDefault(),E(!0),""===s?(i.notify.show(p.a.t("Mail:noValue"),"error"),E(!1)):b.a.post("".concat(N,"api/mail/send/signaturePetition/"),{invoiceId:o.invoice,from:o.from,to:s}).then((function(e){e.data.success?(i.notify.show(e.data.message,"success"),E(!1),m(""),a()):(i.notify.show(e.data.message,"warning"),E(!1))})).catch((function(){i.notify.show(p.a.t("Mail:cantSend"),"error"),E(!1)}))}},r.a.createElement(_.a.Body,null,r.a.createElement(T.a.Group,{controlId:"formBasicEmail"},r.a.createElement(T.a.Label,null,p.a.t("Mail:address"),":"),r.a.createElement(T.a.Control,{type:"email",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement(T.a.Text,{className:"d-none d-sm-block text-muted"},p.a.t("Mail:linkText"),":"," ",r.a.createElement("a",{href:"".concat(j,"#/offlinesignature/").concat(o.invoice)},"".concat(j,"#/offlinesignature/").concat(o.invoice))))),r.a.createElement(_.a.Footer,null,r.a.createElement(P.a,{disabled:f,onClick:function(){a(),m("")},variant:"secondary"},r.a.createElement(D.a,{icon:x.t})," ",p.a.t("Mail:close")),r.a.createElement(P.a,{disabled:f,type:"submit",variant:"primary"},r.a.createElement(D.a,{icon:x.j})," ",f?p.a.t("Mail:loading"):p.a.t("Mail:send")))))};function W(e){var a=e.completed,t=e.pending,o=e.deleteBill,c=e.refreshData,l=e.isLoading,i=Object(I.g)(),s=Object(n.useState)({invoice:"",from:""}),m=Object(d.a)(s,2),u=m[0],g=m[1],E=Object(n.useState)(!1),v=Object(d.a)(E,2),h=v[0],b=v[1],y=Object(n.useState)({id:"",prevTags:[]}),N=Object(d.a)(y,2),j=N[0],S=N[1],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];S({id:e,prevTags:a}),b((function(e){return!e}))};return l?r.a.createElement(H,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{resetData:function(){g({invoice:"",from:""}),c({from:"",to:"",tags:""})},show:""!==u.invoice&&""!==u.from,data:u}),r.a.createElement(z,{show:h,handleClose:function(){return C()},invoiceId:j.id,prevTags:j.prevTags,refreshData:function(){return c({})}}),r.a.createElement(O.a,{className:"bg-white rounded shadow p-3 mb-3"},r.a.createElement("small",{className:"text-muted"},"".concat(p.a.t("Invoices:pending")," - ").concat(t.length)),r.a.createElement(q.a,null,t.map((function(e){var a,t,n;return r.a.createElement(q.a.Item,{key:Math.random()},r.a.createElement(w.a,null,r.a.createElement(O.a,{md:"2"},f()(B(e.date)).format("L")),r.a.createElement(O.a,null,e.from," ",r.a.createElement("small",null,"(",e.currency," $",e.amount," -"," ",p.a.t("Radio:".concat(e.payment)),")"),null===(a=e.tags)||void 0===a?void 0:a.map((function(e){return r.a.createElement(V.a,{key:Math.random(),variant:"info",className:"ml-1"},e)}))," ",(null===(t=e.alreadySent)||void 0===t?void 0:t.isAlreadySent)?r.a.createElement(Y.a,{placement:"top",overlay:r.a.createElement(A.a,{id:"mail-already-sent"},"".concat(p.a.t("Invoices:mail"),": ").concat(null===(n=e.alreadySent)||void 0===n?void 0:n.emailAddress))},r.a.createElement(D.a,{icon:G.a,style:{color:"#6DB65B"}})):null),r.a.createElement(O.a,{md:"2",className:"text-right text-primary"},r.a.createElement(D.a,{icon:x.s,className:"pointer",onClick:function(){return C(e._id,e.tags)}}),r.a.createElement(D.a,{onClick:function(){return i.push("/invoice/edit/".concat(e._id,"/"))},className:"pointer mx-3",icon:x.k}),r.a.createElement(D.a,{onClick:function(){return o(e._id)},className:"pointer mr-3",icon:x.u}),r.a.createElement(D.a,{className:"pointer",onClick:function(){return g({invoice:e._id?e._id:"",from:e.from})},icon:x.j}))))}))),r.a.createElement("hr",null),r.a.createElement("small",{className:"text-muted"},"".concat(p.a.t("Invoices:completed")," - ").concat(a.length)),r.a.createElement(q.a,null,a.map((function(e){var a;return r.a.createElement(q.a.Item,{key:Math.random()},r.a.createElement(w.a,null,r.a.createElement(O.a,{md:"2"},f()(B(e.date)).format("L")),r.a.createElement(O.a,null,e.from," ",r.a.createElement("small",null,"(",e.currency," $",e.amount," -"," ",p.a.t("Radio:".concat(e.payment)),")"),null===(a=e.tags)||void 0===a?void 0:a.map((function(e){return r.a.createElement(V.a,{key:Math.random(),variant:"info",className:"ml-1"},e)}))," "),r.a.createElement(O.a,{md:"2",className:"text-right text-primary"},r.a.createElement(D.a,{className:"pointer",icon:x.s,onClick:function(){return C(e._id,e.tags)}}),r.a.createElement(D.a,{onClick:function(){return i.push("/invoice/edit/".concat(e._id,"/"))},className:"ml-3 pointer",icon:x.k}),r.a.createElement(D.a,{onClick:function(){return i.push("/invoice/display/".concat(e._id,"/no"))},icon:x.n,className:"mx-3 pointer"}),r.a.createElement(D.a,{onClick:function(){return o(e._id)},className:"pointer",icon:x.u})))," ")})))))}var J,$=t(62),K=t.n($),X=t(85),Z=t(168),ee=t(292),ae=t(299),te=t(72),ne=t.n(te);function re(e){var a=e.sendEmail,t=e.setRecipient,n=e.recipient,o=e.validated;return r.a.createElement(O.a,{className:"px-5 py-3 bg-white shadow rounded"},r.a.createElement(T.a,{noValidate:!0,onSubmit:a,validated:o},r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("EmailInput:title")),r.a.createElement(T.a.Control,{type:"email",value:n,onChange:t,placeholder:p.a.t("EmailInput:placeholder"),required:!0}),r.a.createElement(T.a.Control.Feedback,{type:"invalid"},p.a.t("EmailInput:error"))),r.a.createElement(P.a,{variant:"primary",type:"submit"},r.a.createElement(D.a,{icon:x.j})," ",p.a.t("EmailInput:send"))))}function oe(e){var a=e.exportPDFToFile,t=e.transformPDFToBase64,n=e.toggleEmailInput,o=e.hasSocketId;return r.a.createElement(O.a,{className:"p-3 bg-light text-center shadow rounded"},r.a.createElement(P.a,{className:"mx-2",onClick:a},r.a.createElement(D.a,{icon:x.g})," ",p.a.t("Buttons:download")),r.a.createElement(P.a,{disabled:o,className:"mx-2",onClick:t},r.a.createElement(D.a,{icon:x.l})," ",p.a.t("Buttons:sendToPhone")),r.a.createElement(P.a,{onClick:n,className:"mx-2"},r.a.createElement(D.a,{icon:x.f})," ",p.a.t("Buttons:sendToMail")))}function ce(e){var a=e.isOriginal,t=void 0!==a&&a,n=e.data,o="".concat(p.a.t("GenerateInvoice:transactionNumber")," ").concat(n.transactionNumber);return r.a.createElement(w.a,{className:"pdf-font my-5 py-5 bg-white border border-black"},r.a.createElement(O.a,{md:1,className:"d-flex justify-content-center align-items-center flex-column"},n.logo?r.a.createElement("img",{src:n.logo,alt:"RollingCode School",height:"50"}):null,r.a.createElement("p",{className:"text-muted p-0 mt-auto text-center",style:{}},t?p.a.t("Invoice:originalInvoice"):p.a.t("Invoice:duplicateInvoice"))),r.a.createElement(O.a,{className:"px-5"},r.a.createElement(w.a,{className:"border-bottom mt-3 pb-3"},r.a.createElement(O.a,null,r.a.createElement("p",{className:"text-monospace"},p.a.t("Invoice:receiptNumber"),": ",n.invoiceNumber),r.a.createElement("small",{className:"text-monospace"},n.transactionNumber?o:null)),r.a.createElement(O.a,{md:"2"}),r.a.createElement(O.a,{className:"text-center"},r.a.createElement("p",{className:"my-0"},r.a.createElement("strong",null,p.a.t("Invoice:date"),": "),f()(n.date).format("MMMM Do [del] YYYY")))),r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(w.a,{className:"bg-light my-3"},r.a.createElement(O.a,{md:3},r.a.createElement("p",{className:"text-center my-2"},r.a.createElement("strong",null,p.a.t("Invoice:received")))),r.a.createElement(O.a,null,r.a.createElement("p",{className:"my-2"},r.a.createElement("strong",null,p.a.t("Invoice:from"),": "),n.from))),r.a.createElement(w.a,{className:"bg-light my-3"},r.a.createElement(O.a,null,r.a.createElement("p",{className:"my-2"},r.a.createElement("strong",null,p.a.t("Invoice:quantity"),": "),n.amountText))),r.a.createElement(w.a,{className:"bg-light my-3"},r.a.createElement(O.a,null,r.a.createElement("p",{className:"my-2"},r.a.createElement("strong",null,p.a.t("Invoice:inConceptOf"),": ")," ",n.concept))))),r.a.createElement(w.a,null,r.a.createElement(O.a,{md:2,className:"bg-light"},r.a.createElement("p",{className:"my-2"},r.a.createElement("strong",null,"Son: ")," ",n.currency," $",n.amount)),r.a.createElement(O.a,null),r.a.createElement(O.a,{md:6,className:"bg-light"},r.a.createElement("p",{className:"my-2"},r.a.createElement("strong",null,p.a.t("Invoice:receiptBy"),": "),r.a.createElement("img",{src:n.sign,height:"120",alt:"signature"}))))))}var le=t(287),ie=t(288),se=t(295),me=Object(n.createContext)({generateId:function(){return""},currentId:""});function ue(e){var a=e.children,t=Object(n.useState)(""),o=Object(d.a)(t,1)[0];return r.a.createElement(me.Provider,{value:{generateId:function(){return Object(se.a)()},currentId:o}},a)}var de,pe,ge=Object(n.createContext)({}),fe=function(e){var a=e.children,t=Object(I.g)(),o=localStorage.getItem("bill-token"),c=Object(n.useState)({isLoggedIn:!1,level:9,token:"",name:""}),l=Object(d.a)(c,2),s=l[0],m=l[1];return o&&!s.isLoggedIn&&b.a.post("".concat(N,"api/user/loggedInUser"),{storedToken:o},{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){localStorage.setItem("bill-token",e.data.data.token),m({isLoggedIn:!0,level:9,token:e.data.data.token,name:e.data.data.name})})).catch((function(e){localStorage.removeItem("bill-token");var a=e.response?e.response.data.message:e.message;i.notify.show(a,"error"),m({isLoggedIn:!1,level:9,token:"",name:""}),t.push("/")})),r.a.createElement(ge.Provider,{value:Object(k.a)(Object(k.a)({},s),{},{setUserData:m})},a)},Ee=t(161),ve=t.n(Ee),he=t(162),be=t.n(he);function ye(e){var a=e.show,t=void 0===a||a,n=e.onHide,o=void 0===n?function(){return!t}:n,c=e.currentId,l=void 0===c?"Error":c;return r.a.createElement(_.a,{size:"xl",show:t,onHide:o},r.a.createElement(_.a.Body,null,r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement("p",{className:"lead text-center"},p.a.t("QR:body")))),r.a.createElement(w.a,{className:"my-5 d-flex align-items-center justify-content-center"},r.a.createElement(O.a,null),r.a.createElement(O.a,{className:"".concat(be.a.qrcode," w-auto qrcode bg-white shadow rounded p-3 text-center")},r.a.createElement(ve.a,{size:200,value:"".concat(j,"#/signature/").concat(l)})),r.a.createElement(O.a,null)),r.a.createElement(w.a,null,r.a.createElement(O.a,{className:"text-center"},r.a.createElement("small",null,p.a.t("QR:alternative")," ",r.a.createElement("a",{target:"_blank",rel:"noreferrer",href:"".concat(j,"#/signature/").concat(l)},"".concat(j,"#/signature/").concat(l))))),r.a.createElement(w.a,null,r.a.createElement(O.a,{className:"text-center"},r.a.createElement("p",{className:"lead"},p.a.t("QR:finishing")," "),r.a.createElement(P.a,{onClick:o},r.a.createElement(D.a,{icon:x.t})," ",p.a.t("QR:close"))))))}function we(){var e=(new Date).toISOString().substr(0,10),a=localStorage.getItem("bill-token")?{headers:{auth:localStorage.getItem("bill-token")}}:void 0,t=Object(I.h)().id,o=Object(n.useContext)(me).generateId,c=Object(n.useContext)(ge).isLoggedIn,l=Object(n.useState)({invoiceNumber:1,date:e,from:"",amountText:"",amount:0,concept:"",currency:"ARS",pending:!1,sign:"",payment:"cash",transactionNumber:void 0}),s=Object(d.a)(l,2),m=s[0],u=s[1],g=Object(n.useState)(!1),f=Object(d.a)(g,2),E=f[0],v=f[1],h=Object(n.useState)(!1),j=Object(d.a)(h,2),S=j[0],L=j[1],R=Object(n.useState)(!1),B=Object(d.a)(R,2),M=B[0],G=B[1],q=Object(I.g)(),V=function(e){var a=e.target,t=a.name,n=a.value,r=a.type,o=a.checked,c="checkbox"===r?o:n;u(Object(k.a)(Object(k.a)({},m),{},Object(C.a)({},t,c)))};Object(n.useEffect)((function(){return de=ne()(N),t&&b.a.get("".concat(N,"api/invoice/single/").concat(t)).then((function(e){var a=e.data,t=a.data.date.substr(0,10);u(Object(k.a)(Object(k.a)({},a.data),{},{date:t}))})),de.on("close",(function(){L(!1),i.notify.show(p.a.t("GenerateInvoice:phoneConnected"),"success")})),de.on("sign",(function(e){u((function(a){return Object(k.a)(Object(k.a)({},a),{},{sign:e,pending:!1})}))})),function(){de.disconnect(),pe=""}}),[N]);var Y=function(){var e=Object(X.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe||(pe=o(),de.emit("join",pe)),L((function(e){return!e}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(y.a,{className:"h-100-minus"},r.a.createElement(ye,{currentId:pe,show:S,onHide:function(){L((function(e){return!e}))}}),r.a.createElement(w.a,{className:"h-100-minus align-items-center"},r.a.createElement(O.a,{className:"bg-light p-3 shadow rounded"},r.a.createElement(T.a,{noValidate:!0,validated:E,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),G(!0);var n=e.currentTarget;return m.sign||m.pending?(!1===n.checkValidity()?i.notify.show(p.a.t("GenerateInvoice:verifyForm"),"error"):t?b.a.put("".concat(N,"api/invoice/edit/").concat(t),Object(k.a)(Object(k.a)({},m),{},{pending:""===m.sign}),{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){var a=e.data;a.success&&a.data._id&&q.push(m.pending?"/dashboard":"/invoice/display/".concat(a.data._id,"/").concat(pe)),i.notify.show(a.message,"success")})).catch((function(e){i.notify.show(p.a.t("GenerateInvoice:errorCreatingInvoice"),"error")})):b.a.post("".concat(N,"api/invoice/"),Object(k.a)({},m),a).then((function(e){var a=e.data;a.id&&q.push(m.pending?"/dashboard":"/invoice/display/".concat(a.id,"/").concat(pe)),i.notify.show(a.message,"success")})).catch((function(e){i.notify.show(p.a.t("GenerateInvoice:errorCreatingInvoice"),"error")})),G(!1),v(!0),!1):(i.notify.show(p.a.t("GenerateInvoice:signatureNeeded"),"error"),G(!1),null)}},r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Invoice:date")),r.a.createElement(T.a.Control,{required:!0,name:"date",onChange:V,value:m.date.toString(),type:"date"}),r.a.createElement(T.a.Control.Feedback,{type:"invalid"},p.a.t("GIError:date"))))),r.a.createElement(w.a,null,r.a.createElement(O.a,{md:"3"},r.a.createElement("p",{className:"text-center"},p.a.t("Invoice:received"))),r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Invoice:from")),r.a.createElement(T.a.Control,{required:!0,name:"from",onChange:V,value:m.from,type:"text"})))),r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Invoice:quantity")),r.a.createElement(T.a.Control,{required:!0,name:"amountText",onChange:V,value:m.amountText,type:"text"})))),r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Invoice:inConceptOf")),r.a.createElement(T.a.Control,{required:!0,name:"concept",onChange:V,value:m.concept,type:"text"})))),r.a.createElement(w.a,null,r.a.createElement(O.a,{sm:12,md:3},r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("Invoice:quantity")),r.a.createElement(le.a,null,r.a.createElement(le.a.Prepend,null,r.a.createElement(le.a.Text,null,r.a.createElement("select",{name:"currency",onChange:V,value:m.currency,className:"no-decoration"},r.a.createElement("option",null,"ARS"),r.a.createElement("option",null,"USD")))),r.a.createElement(T.a.Control,{required:!0,name:"amount",onChange:V,value:m.amount,min:1,type:"decimal"})))),r.a.createElement(O.a,{className:"text-right"},r.a.createElement("p",{className:"lead"},p.a.t("Invoice:signature"),":")),r.a.createElement(O.a,null,m.sign?r.a.createElement("img",{height:"100",src:m.sign,className:"signature",alt:p.a.t("Invoice:signature")}):null)),r.a.createElement(w.a,{className:"d-flex align-items-center justify-content-center"},r.a.createElement(O.a,null,r.a.createElement("div",{className:"border border-gray p-3"},F.map((function(e){return r.a.createElement(T.a.Check,{className:"mx-3",inline:!0,type:"radio",label:p.a.t("Radio:".concat(e)),checked:m.payment===e,onChange:function(){return u(Object(k.a)(Object(k.a)({},m),{},{payment:e}))}})})))),r.a.createElement(O.a,{md:"5"},r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Label,null,p.a.t("GenerateInvoice:transactionNumber")),r.a.createElement(T.a.Control,{name:"transactionNumber",onChange:V,value:m.transactionNumber,type:"text"})))),r.a.createElement(w.a,null,r.a.createElement(O.a,{className:"d-flex align-items-center justify-content-end flex-column flex-md-row text-md-right text-center"},c?r.a.createElement("fieldset",{className:"mt-3 mt-md-0 w-100 mx-3 py-1 px-2 border border-gray rounded"},r.a.createElement("label",{htmlFor:"pending",className:"m-0 p-0"},r.a.createElement("input",{id:"pending",type:"checkbox",name:"pending",checked:m.pending,onChange:V,className:"mr-1 p-0 m-0"}),p.a.t("GenerateInvoice:markAsPending"))):null,r.a.createElement(P.a,{variant:"info",onClick:Y,className:"mt-3 mt-md-0 w-100 mx-3"},r.a.createElement(D.a,{icon:x.o})," ",p.a.t("GenerateInvoice:QR")),r.a.createElement(P.a,{disabled:M,variant:"secondary",className:"mt-3 mt-md-0 w-100 mx-3",onClick:function(){q.goBack()}},r.a.createElement(D.a,{icon:x.t})," ",p.a.t("GenerateInvoice:cancel")),r.a.createElement(P.a,{className:"mt-3 mt-md-0 w-100 mx-3",disabled:M,variant:"primary",type:"submit"},M?r.a.createElement(ie.a,{size:"sm",animation:"border"}):r.a.createElement(D.a,{icon:x.p})," ",p.a.t("GenerateInvoice:save"))))))))}var Oe=[{id:1,name:"email"},{id:2,name:"password"}];function Ie(e){var a=e.show,t=e.handleClose,n=e.PDFFile;return r.a.createElement(_.a,{show:a,onHide:t},r.a.createElement(_.a.Header,{closeButton:!0},r.a.createElement(_.a.Title,null,p.a.t("DownloadModal:title"))),r.a.createElement(_.a.Body,null,p.a.t("DownloadModal:body")," "),r.a.createElement(_.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:t},r.a.createElement(D.a,{icon:G.b})," ",p.a.t("DownloadModal:ignore")),r.a.createElement("a",{download:"Comprobante.pdf",href:n},r.a.createElement(P.a,null,r.a.createElement(D.a,{icon:x.e})," ",p.a.t("DownloadModal:download")))))}var Ne,je=t(249);function Se(){var e=Object(n.useRef)(),a=Object(I.h)(),t=a.socketId,o=a.invoiceId,c=Object(n.useState)(!1),l=Object(d.a)(c,2),s=l[0],m=l[1],u=Object(n.useState)(""),g=Object(d.a)(u,2),f=g[0],E=g[1],v=Object(n.useState)({}),h=Object(d.a)(v,2),j=h[0],S=h[1];Object(n.useEffect)((function(){return t?((Ne=ne()(N)).emit("join",t),Ne.emit("close",!1),Ne.on("pdf",(function(e){E(e),L()}))):o&&b.a.get("".concat(N,"api/invoice/single/").concat(o)).then((function(e){var a=e.data;a.success&&S(a.data)})).catch((function(e){return alert(e.response.data.message)})),function(){t&&Ne.off("pdf")}}),[N]);var C=function(){t&&Ne.emit("sign",e.current.toDataURL())},L=function(){m(!s)};return r.a.createElement(y.a,{className:"h-100-minus mt-5"},r.a.createElement(Ie,{PDFFile:f,show:s,handleClose:L}),r.a.createElement(w.a,{className:o?"d-block":"d-none"},r.a.createElement(O.a,{className:"text-center"},r.a.createElement("h1",null,p.a.t("Signature:greeting")),r.a.createElement("p",null,p.a.t("Signature:received")," ",r.a.createElement("strong",null,j.from)," ",p.a.t("Signature:concept")," ",r.a.createElement("strong",null,j.concept)," ",p.a.t("Signature:amount")," ",r.a.createElement("strong",null,j.currency," ",j.amount)),r.a.createElement("hr",null))),r.a.createElement(w.a,null,r.a.createElement(O.a,{className:"text-center"},r.a.createElement("p",{className:"lead m-0"},p.a.t("Signature:sign")),r.a.createElement("small",{className:"text-muted"},p.a.t("Signature:horizontal")))),r.a.createElement(w.a,{className:"my-5"},r.a.createElement(O.a,{onTouchEnd:C,onMouseUp:C,className:"bg-white shadow rounded"},r.a.createElement(je,{ref:e}))),r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(P.a,{className:"w-100",variant:"danger",onClick:function(){e.current.clear(),C()}},r.a.createElement(D.a,{icon:x.t})," ",p.a.t("Signature:reset"))),r.a.createElement(O.a,{className:o?"d-block":"d-none"},r.a.createElement(P.a,{className:"w-100",variant:"success",onClick:function(){window.confirm("".concat(p.a.t("Signature:confirm")," ").concat(j.from,"?"))&&b.a.put("".concat(N,"api/invoice/addSignature/").concat(o),Object(k.a)(Object(k.a)({},j),{},{sign:e.current.toDataURL()})).then((function(e){i.notify.show(p.a.t("Signature:success"),"success")})).catch((function(e){var a=e.response?e.response.data.message:e.message;i.notify.show(a,"error")}))}},r.a.createElement(D.a,{icon:x.r})," ",p.a.t("Signature:send")))),r.a.createElement(w.a,{className:t?"d-block my-5 text-center":"d-none"},r.a.createElement(O.a,null,r.a.createElement("p",{className:"lead"},p.a.t("Signature:alert")),r.a.createElement("p",null,p.a.t("Signature:alertBody")," "))))}var Ce=t(163),ke=t.n(Ce),xe=[{id:1,type:"text",name:"name"},{id:2,type:"email",name:"email"},{id:3,type:"password",name:"password"},{id:4,type:"password",name:"passwordConfirmation"}];var De=[{id:1,path:"/",component:function(){return r.a.createElement(y.a,null,r.a.createElement(w.a,{className:"h-100-minus align-items-center text-center text-md-left"},r.a.createElement(O.a,null,r.a.createElement("h1",null,p.a.t("Home:title")," ",r.a.createElement("span",{role:"img","aria-label":"Page"},"\ud83d\udcc3")),r.a.createElement("p",{className:"lead"},p.a.t("Home:body")),r.a.createElement(l.c,{to:"/invoice/generate"},r.a.createElement(P.a,null,r.a.createElement(D.a,{icon:x.i})," ",p.a.t("Home:startNow")))),r.a.createElement(O.a,{className:"text-right d-none d-md-block"},r.a.createElement("h6",null,p.a.t("Home:currentTime"),":"),r.a.createElement("h3",null,f()().format("MMMM Do YYYY, h:mm:ss a")))))}},{id:2,path:"/login",component:function(){var e=Object(n.useContext)(ge).setUserData,a=Object(n.useState)({email:"",password:""}),t=Object(d.a)(a,2),o=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(d.a)(l,2),m=s[0],u=s[1],g=Object(n.useState)(!1),f=Object(d.a)(g,2),E=f[0],v=f[1],h=Object(I.g)(),j=function(e){var a=e.target,t=a.name,n=a.value;c(Object(k.a)(Object(k.a)({},o),{},Object(C.a)({},t,n)))};return r.a.createElement(y.a,null,r.a.createElement(w.a,{className:"h-100-minus align-items-center"},r.a.createElement(O.a,null),r.a.createElement(O.a,{md:6,sm:12,className:"shadow rounded bg-light p-3"},r.a.createElement(T.a,{onSubmit:function(a){var t=a.currentTarget;a.preventDefault(),v(!0),!1===t.checkValidity()?(a.stopPropagation(),i.notify.show(p.a.t("Login:verifyData"),"error"),v(!1)):(a.stopPropagation(),b.a.post("".concat(N,"api/user/login"),o).then((function(a){var t=a.data;t.success?(e({isLoggedIn:!0,token:t.data.token,name:t.data.name}),localStorage.setItem("bill-token",t.data.token),i.notify.show("".concat(t.message),"success"),v(!1),h.push("/")):(i.notify.show(p.a.t("Login:error"),"error"),v(!1))})).catch((function(e){var a=e.response?e.response.data.message:e.message;i.notify.show("".concat(a),"error"),v(!1)}))),u(!0)},noValidate:!0,validated:m},Oe.map((function(e){return r.a.createElement(T.a.Group,{key:e.id},r.a.createElement(T.a.Label,{htmlFor:e.name},p.a.t("Login:".concat(e.name))),r.a.createElement(T.a.Control,{id:e.name,type:e.name,name:e.name,value:o[e.name],onChange:j,required:!0}),r.a.createElement(T.a.Control.Feedback,{type:"invalid"},p.a.t("Login:".concat(e.name,"Validation"))))})),r.a.createElement(P.a,{disabled:E,variant:"primary",type:"submit"},E?r.a.createElement(ie.a,{animation:"border",size:"sm"}):r.a.createElement(D.a,{icon:x.b})," ",p.a.t("Login:login")))),r.a.createElement(O.a,null)))}},{id:3,path:"/logout",component:function(){var e=Object(n.useContext)(ge),a=Object(I.g)();return Object(n.useEffect)((function(){localStorage.removeItem("bill-token"),e.setUserData({isLoggedIn:!1,level:9,token:"",name:""})}),[]),r.a.createElement(y.a,null,r.a.createElement(w.a,{className:"h-100-minus align-items-center"},r.a.createElement(O.a,{className:"text-center"},r.a.createElement("h1",null,p.a.t("Logout:title")," ",r.a.createElement("span",{role:"img","aria-label":"sad"},"\ud83d\ude22")),r.a.createElement("p",null," ",p.a.t("Logout:body")),r.a.createElement(P.a,{className:"mt-5",onClick:function(){return a.push("/")}},p.a.t("Logout:goBack")))))}},{id:4,path:"/signup",component:function(){var e=Object(I.g)(),a=Object(n.useContext)(ge),t=Object(n.useState)({name:"",email:"",password:"",repeatPassword:"",token:""}),o=Object(d.a)(t,2),c=o[0],l=o[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),u=m[0],g=m[1],f=Object(n.useRef)(),E=Object(n.useState)(!1),v=Object(d.a)(E,2),h=v[0],j=v[1],L=function(e){var a=e.target,t=a.name,n=a.value;l(Object(k.a)(Object(k.a)({},c),{},Object(C.a)({},t,n)))};return r.a.createElement(y.a,null,r.a.createElement(w.a,{className:"h-100-minus align-items-center"},r.a.createElement(O.a,null,r.a.createElement("h1",null,p.a.t("Signup:title")),r.a.createElement("p",{className:"lead"},p.a.t("Signup:body"))),r.a.createElement(O.a,{className:"bg-light shadow p-3 rounded"},r.a.createElement(T.a,{noValidate:!0,validated:h,onSubmit:function(t){t.preventDefault(),g(!0);var n=t.currentTarget;c.token?!1===n.checkValidity()?(t.stopPropagation(),i.notify.show(p.a.t("Signup:verifyForm"),"error")):(t.stopPropagation(),b.a.post("".concat(N,"api/user/register"),{email:c.email,password:c.password,name:c.name,token:c.token}).then((function(t){t.data.success?b.a.post("".concat(N,"api/user/login"),{email:c.email,password:c.password}).then((function(t){var n=t.data;n.success?(f.current.resetCaptcha(),a.setUserData({isLoggedIn:!0,token:n.data.token,name:n.data.name}),localStorage.setItem("bill-token",n.data.token),i.notify.show("".concat(n.message),"success"),g(!1),e.push("/")):(i.notify.show(p.a.t("Signup:error"),"error"),g(!1))})).catch((function(e){i.notify.show("".concat(e.response.data.message),"error"),g(!1)})):(i.notify.show("Error: ".concat(t.data.message),"error"),g(!1))})).catch((function(e){try{i.notify.show("".concat(e.response.data.message),"error"),g(!1)}catch(a){i.notify.show("".concat(a.message),"error"),g(!1)}}))):(t.stopPropagation(),i.notify.show(p.a.t("Signup:invalidToken"),"error")),j(!0)}},xe.map((function(e){return r.a.createElement(T.a.Group,{key:e.id},r.a.createElement(T.a.Label,{htmlFor:e.name},p.a.t("Signup:".concat(e.name))),r.a.createElement(T.a.Control,{id:e.name,type:e.type,name:e.name,onChange:L,value:c[e.name],required:!0}),r.a.createElement(T.a.Control.Feedback,{type:"invalid"},p.a.t("Signup:".concat(e.name,"Validation"))))})),r.a.createElement(T.a.Group,{"data-testid":"testing"},r.a.createElement(T.a.Label,{htmlFor:"captcha"},"Captcha!"),r.a.createElement(ke.a,{ref:f,sitekey:S,onVerify:function(e){return l(Object(k.a)(Object(k.a)({},c),{},{token:e}))},onExpire:function(){return l(Object(k.a)(Object(k.a)({},c),{},{token:""}))}})),r.a.createElement(P.a,{disabled:u,variant:"primary",type:"submit"},u?r.a.createElement(ie.a,{animation:"border",size:"sm"}):r.a.createElement(D.a,{icon:x.a})," ",p.a.t("Signup:save"))))))}},{id:5,path:"/invoice/generate",component:we},{id:6,path:"/invoice/display/:id/:socketId",component:function(){var e=Object(n.useRef)(r.a.createElement("div",null)),a=Object(I.h)(),t=a.id,o=a.socketId,c=Object(n.useState)({invoiceNumber:1,logo:"",date:new Date,from:"",amountText:"",amount:0,concept:"",sign:"",currency:"ARS",pending:!1,transactionNumber:void 0}),l=Object(d.a)(c,2),s=l[0],m=l[1],u=Object(n.useState)(!1),g=Object(d.a)(u,2),f=g[0],E=g[1],v=Object(n.useState)(""),h=Object(d.a)(v,2),O=h[0],j=h[1],S=Object(n.useState)(!1),C=Object(d.a)(S,2),x=C[0],D=C[1],L=function(){return Object(ee.a)(e.current,{paperSize:"A4",landscape:!0,scale:.75}).then((function(e){return Object(ae.a)(e)}))},R=function(){var e=Object(X.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=J,e.next=3,L();case 3:e.t1=e.sent,e.t0.emit.call(e.t0,"pdf",e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(X.a)(K.a.mark((function e(a){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=a.currentTarget,e.next=4,L();case 4:n=e.sent,!0===t.checkValidity()&&b.a.post("".concat(N,"api/mail/send/invoice"),{file:n,date:s.date,email:O}).then((function(e){var a=e.data,t=a.success,n=a.message;t?i.notify.show(n,"success"):i.notify.show(n,"error")})).catch((function(e){i.notify.show(p.a.t("DisplayInvoice:error"),"error")})),D(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return J=ne()(N),b.a.get("".concat(N,"api/invoice/single/").concat(t)).then((function(e){var a=e.data,t=function(e){var a=e.slice(0,10).split("-");return{year:parseInt(a[0]),month:parseInt(a[1],10)-1,date:parseInt(a[2])}}(a.data.date),n=t.year,r=t.month,o=t.date;m(Object(k.a)(Object(k.a)({},a.data),{},{date:new Date(n,r,o)}))})),J.emit("join",o),function(){J.off("join")}}),[N]),r.a.createElement(y.a,null,r.a.createElement(w.a,{className:"my-5"},r.a.createElement(oe,{exportPDFToFile:function(){Object(Z.a)(e.current,{paperSize:"A4",fileName:"Invoice - ".concat(Intl.DateTimeFormat(navigator.language,{month:"numeric",day:"numeric",year:"numeric"}).format(new Date(s.date))," - ").concat(t),landscape:!1,scale:.5})},transformPDFToBase64:R,toggleEmailInput:function(){return E(!f)},hasSocketId:"no"===o})),r.a.createElement(w.a,{className:f?"d-block":"d-none"},r.a.createElement(re,{recipient:O,sendEmail:function(e){return T(e)},setRecipient:function(e){return j(e.target.value)},validated:x})),r.a.createElement("div",{ref:e},r.a.createElement(ce,{data:s,isOriginal:!0}),r.a.createElement(ce,{data:s})))}},{id:7,path:"/signature/:socketId",component:Se},{id:8,path:"/offlinesignature/:invoiceId",component:Se}],Le=[{id:1,path:"/invoice/edit/:id",component:we},{id:2,path:"/dashboard",component:function(){var e=Object(I.g)(),a=Object(n.useState)([]),t=Object(d.a)(a,2),o=t[0],c=t[1],l=Object(n.useState)([]),s=Object(d.a)(l,2),m=s[0],u=s[1],g=Object(n.useState)(!0),f=Object(d.a)(g,2),E=f[0],v=f[1],h={headers:{auth:localStorage.getItem("bill-token")}},j=function(a){var t=b.a.get("".concat(N,"api/invoice/completed?from=").concat(a.from,"&to=").concat(a.to,"&tags=").concat(a.tags,"&types=").concat(a.type),h),n=b.a.get("".concat(N,"api/invoice/pending?from=").concat(a.from,"&to=").concat(a.to,"&tags=").concat(a.tags,"&types=").concat(a.type),h);b.a.all([t,n]).then(b.a.spread((function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];u(a[0].data.data),c(a[1].data.data),v(!1)}))).catch((function(a){i.notify.show(p.a.t("Dashboard:queryError"),"error"),e.push("/")}))};return Object(n.useEffect)((function(){v(!0),j({})}),[]),r.a.createElement(y.a,{className:"my-5"},r.a.createElement(w.a,{className:"h-100-minus"},r.a.createElement(O.a,null,r.a.createElement(M,{isLoading:E,setIsLoading:function(e){return v(e)},submitFilter:function(e){return j(e)}}),r.a.createElement(W,{isLoading:E,refreshData:function(e){return j(e)},deleteBill:function(e){return function(e){void 0!==e&&window.confirm(p.a.t("Dashboard:deleteBill"))&&b.a.delete("".concat(N,"api/invoice/").concat(e),h).then((function(e){e.data.success?(i.notify.show(p.a.t("Dashboard:deleteConfirm"),"success"),j({})):i.notify.show(e.data.message,"warning")})).catch((function(e){i.notify.show(e.response.data.message,"error")}))}(e)},completed:m,pending:o}))))}}],Re=t(169),Te=function(e){var a=e.render,t=Object(Re.a)(e,["render"]),o=Object(n.useContext)(ge);return r.a.createElement(I.b,Object.assign({},t,{render:function(e){return o.isLoggedIn||localStorage.getItem("bill-token")?r.a.createElement(a,e):r.a.createElement(I.a,{to:"/"})}}))},Pe=t(298),Fe=t(289),Be=t(294);function Me(){return r.a.createElement("div",null,r.a.createElement(Be.a.Item,null,r.a.createElement(l.c,{className:"text-dark text-decoration-none",to:"/profile"},r.a.createElement(D.a,{icon:x.w,className:"mr-1"})," ",p.a.t("LoggedInOpts:profile"))),r.a.createElement(Be.a.Item,null,r.a.createElement(l.c,{className:"text-dark text-decoration-none",to:"/logout"},r.a.createElement(D.a,{icon:x.d,className:"mr-1"})," ",p.a.t("LoggedInOpts:closeSession"))))}function Ge(){return r.a.createElement("div",null,r.a.createElement(Be.a.Item,null,r.a.createElement(l.c,{className:"text-dark text-decoration-none",to:"/login"},r.a.createElement(D.a,{icon:x.v,className:"mr-1"})," ",p.a.t("LoggedOutOpts:login"))),r.a.createElement(Be.a.Item,null,r.a.createElement(l.c,{className:"text-dark text-decoration-none",to:"/signup"},r.a.createElement(D.a,{icon:x.x,className:"mr-1"})," ",p.a.t("LoggedOutOpts:signUp"))))}function qe(){return r.a.createElement(Fe.a,{className:"mr-auto"},r.a.createElement(l.c,{className:"text-light mr-3 text-decoration-none",to:"/"},r.a.createElement(D.a,{icon:x.h})," ",p.a.t("LoggedInOpts:home")),r.a.createElement(l.c,{className:"text-light mr-3 text-decoration-none",to:"/invoice/generate"},r.a.createElement(D.a,{icon:x.m})," ",p.a.t("LoggedInOpts:newInvoice")),r.a.createElement(l.c,{className:"text-light mr-3 text-decoration-none",to:"/dashboard"},r.a.createElement(D.a,{icon:x.c})," ",p.a.t("LoggedInOpts:dashboard")))}function Ve(){return r.a.createElement(Fe.a,{className:"mr-auto"},r.a.createElement(l.c,{className:"text-light mr-3 text-decoration-none",to:"/"},r.a.createElement(D.a,{icon:x.h})," ",p.a.t("LoggedInOpts:home")))}function Ye(e){var a=e.changeLang,t=Object(n.useContext)(ge);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{fixed:"top",style:{zIndex:999},bg:"primary",variant:"dark",expand:"lg"},r.a.createElement(l.c,{to:"/"},r.a.createElement(Pe.a.Brand,null,"reciba.app")),r.a.createElement(Pe.a.Toggle,null),r.a.createElement(Pe.a.Collapse,null,t.isLoggedIn?r.a.createElement(qe,null):r.a.createElement(Ve,null),r.a.createElement(Fe.a,{className:"ml-auto"},r.a.createElement("div",{className:"mr-3"},r.a.createElement(P.a,{type:"button",onClick:function(){return a("es")}},r.a.createElement("img",{src:"https://cdn.countryflags.com/thumbs/spain/flag-400.png",alt:"spanish",width:"15"})," ","ES"),r.a.createElement(P.a,{type:"button",onClick:function(){return a("en")}},r.a.createElement("img",{src:"https://www.countryflags.com/wp-content/uploads/united-kingdom-flag-png-large.png",alt:"english",height:"10"})," ","EN")),r.a.createElement(Be.a,{title:"".concat(p.a.t("NavBar:actualUser"),": ").concat(t.isLoggedIn?t.name:p.a.t("NavBar:guest")),id:"collasible-nav-dropdown"},t.isLoggedIn?r.a.createElement(Me,null):r.a.createElement(Ge,null))))),r.a.createElement("div",{style:{height:35}}))}t(154);var Ae=function(){var e=Object(n.useContext)(E);return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,null,r.a.createElement(ue,null,r.a.createElement(l.b,{basename:""},r.a.createElement(Ye,{changeLang:function(a){return function(a){e.setLanguage(a)}(a)}}),r.a.createElement(I.d,null,De.map((function(e){return r.a.createElement(I.b,{exact:!0,key:e.id,path:e.path,component:e.component})})),Le.map((function(e){return r.a.createElement(Te,{exact:!0,key:e.id,path:e.path,render:e.component})})),r.a.createElement(I.b,{render:function(){return r.a.createElement("div",null,"Not found")}}))))))};u.a.tz.setDefault("America/Buenos_Aires"),u.a.locale(localStorage.getItem("i18nextLng")||"en"),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(v,null,r.a.createElement(s.a,{options:{zIndex:998,top:"56px",colors:{error:{color:"#FFFFFF",backgroundColor:"#ff7851"},success:{color:"#FFFFFF",backgroundColor:"#56cc9d"}}}}),r.a.createElement(Ae,null)))),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.c0c88c0c.chunk.js.map
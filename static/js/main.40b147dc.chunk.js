(this["webpackJsonpreciba-app-frontend"]=this["webpackJsonpreciba-app-frontend"]||[]).push([[0],{132:function(e,a,t){"use strict";t.r(a);var n,c=t(3),r=t(274),s=t(160);c.a.use(r.a).use(s.a).init({fallbackLng:"en",detection:{order:["navigator","queryString","cookie"],cache:["cookie"]},interpolation:{escapeValue:!1}}),(n=t(190)).keys().map(n)},184:function(e,a,t){},185:function(e,a,t){},190:function(e,a,t){var n={"./Layout/LoadingScreen/i18n.ts":191,"./Layout/NavigationBar/i18n.ts":192,"./Pages/Dashboard/components/Filter/i18n.ts":193,"./Pages/Dashboard/components/InvoicesList/i18n.ts":194,"./Pages/Dashboard/components/SendMailModal/i18n.ts":195,"./Pages/Dashboard/components/TagsModal/i18n.ts":196,"./Pages/Dashboard/i18n.ts":197,"./Pages/DisplayInvoice/components/Bill/i18n.ts":198,"./Pages/DisplayInvoice/components/ButtonsGroup/i18n.ts":199,"./Pages/DisplayInvoice/components/EmailInput/i18n.ts":200,"./Pages/DisplayInvoice/i18n.ts":201,"./Pages/GenerateInvoice/components/ShowQRCodeModal/i18n.ts":202,"./Pages/GenerateInvoice/i18n.ts":203,"./Pages/Home/i18n.ts":204,"./Pages/Login/i18n.ts":205,"./Pages/Logout/i18n.ts":206,"./Pages/Signature/components/DownloadModal/i18n.ts":207,"./Pages/Signature/i18n.ts":208,"./Pages/Signup/i18n.ts":209,"./constants/i18n.ts":210,"./utils/i18n.js":132};function c(e){var a=r(e);return t(a)}function r(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=190},191:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","LoadingScreen",{text:"Cargando datos"}),n.a.addResources("en","LoadingScreen",{text:"Loading data"})},192:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","NavBar",{actualUser:"Usuario actual",guest:"Invitado"}),n.a.addResources("en","NavBar",{actualUser:"Current user",guest:"Guest"}),n.a.addResources("es","LoggedInOpts",{home:"Principal",newInvoice:"Nuevo comprobante",dashboard:"Tablero",profile:"Perfil",closeSession:"Cerrar sesi\xf3n"}),n.a.addResources("en","LoggedInOpts",{home:"Home",newInvoice:"New invoice",dashboard:"Dashboard",profile:"Profile",closeSession:"Log out"}),n.a.addResources("es","LoggedOutOpts",{login:"Iniciar sesi\xf3n",signUp:"Crear usuario"}),n.a.addResources("en","LoggedOutOpts",{login:"Log in",signUp:"Sign up"})},193:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Filter",{filter:"Filtro",title:"Mostrando las boletas de",tag:"Etiqueta",from:"Desde",to:"Hasta",search:"Buscar",cleanSearch:"Limpiar b\xfasqueda"}),n.a.addResources("en","Filter",{filter:"Filter",title:"Displaying invoices from",tag:"Tag",from:"Since",to:"To",search:"Search",cleanSearch:"Clean search"})},194:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Invoices",{pending:"Boletas pendientes",completed:"Boletas finalizadas",mail:"Mail ya enviado a"}),n.a.addResources("en","Invoices",{pending:"Pending invoices",completed:"Completed invoices",mail:"Email already sent to"})},195:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Mail",{noValue:"Debe especificar un mail v\xe1lido",cantSend:"Ocurri\xf3 un error enviando el mail, reintente",title:"Enviar por mail",address:"Direcci\xf3n de correo",linkText:"Tambi\xe9n pod\xe9s copiar este link y pasarlo por privado",close:"Cerrar",loading:"Espere un momento...",send:"Enviar"}),n.a.addResources("en","Mail",{noValue:"You must specify a valid e-mail address",cantSend:"There was an error sending the mail. Please, try again",title:"Send via e-mail",address:"E-mail address",linkText:"You can also copy this link and send it via private message",close:"Close",loading:"Just a moment...",send:"Send"})},196:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Tags",{title:"Agregar etiquetas",label:"Etiquetas separadas por comas",placeholder:"pendiente, seguimiento",close:"Cerrar",save:"Guardar"}),n.a.addResources("en","Tags",{title:"Add tags",label:"Tags separated by commas",placeholder:"pending, person name",close:"Close",save:"Save"})},197:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Dashboard",{queryError:"Ocurri\xf3 un error trayendo los datos",deleteBill:"Advertencia, se borrar\xe1 la boleta. \xbfDesea continuar?",deleteConfirm:"Boleta borrada correctamente"}),n.a.addResources("en","Dashboard",{queryError:"There was an error getting the data",deleteBill:"Warning! The invoice will be deleted. Do you want to continue?",deleteConfirm:"Invoice deleted successfully"})},198:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Invoice",{originalInvoice:"Recibo original",duplicateInvoice:"Recibo duplicado",receiptNumber:"Recibo N\xb0",date:"Fecha",received:"Recib\xed",from:"De",quantity:"La cantidad de",inConceptOf:"En concepto de",receiptBy:"Recibo por"}),n.a.addResources("en","Invoice",{originalInvoice:"Original receipt",duplicateInvoice:"Duplicated receipt",receiptNumber:"Invoice number",date:"Date",received:"I received",from:"From",quantity:"Quantity of",inConceptOf:"In concept of",receiptBy:"Signature"})},199:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Buttons",{download:"Descargar PDF",sendToPhone:"Enviar PDF al tel\xe9fono",sendToMail:"Enviar copia por mail"}),n.a.addResources("en","Buttons",{download:"Download PDF",sendToPhone:"Send PDF to phone",sendToMail:"Send a copy via E-mail"})},200:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","EmailInput",{title:"Direcci\xf3n de E-mail",placeholder:"correo@servidor.com",error:"Se necesita un E-mail v\xe1lido",send:"Enviar"}),n.a.addResources("en","EmailInput",{title:"E-mail address",placeholder:"mail@server.com",error:"Enter a valid E-mail address",send:"Send"})},201:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","DisplayInvoice",{error:"Ocurri\xf3 un error"}),n.a.addResources("en","DisplayInvoice",{error:"There was an error"})},202:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","QR",{body:"Escanee el c\xf3digo con el celular para poder firmar en este comprobante",alternative:"Tambi\xe9n puede ingresar ac\xe1 para firmar",finishing:"Al terminar la firma, espere hasta que la otra persona termine",close:"Cerrar"}),n.a.addResources("en","QR",{body:"Scan this code with your phone to sign the invoice",alternative:"You can also enter with this URL",finishing:"When finished, please wait until the other person finishes",close:"Close"})},203:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","GenerateInvoice",{signatureNeeded:"Se necesita la firma para continuar",verifyForm:"Por favor, verifique el formulario y reintente",errorCreatingInvoice:"Ocurri\xf3 un error creando el comprobante. Por favor, reintente",phoneConnected:"Tel\xe9fono conectado",markAsPending:"Marcar boleta para firmar luego",QR:"Mostrar c\xf3digo QR para firmar",cancel:"Cancelar",save:"Guardar"}),n.a.addResources("es","GIError",{date:"La fecha es necesaria"}),n.a.addResources("en","GenerateInvoice",{signatureNeeded:"The signature is required to continue",verifyForm:"Please verify the form before continuing",errorCreatingInvoice:"There was an error creating the invoice. Please, retry",phoneConnected:"Phone connected",markAsPending:"Mark as pending",QR:"Show QR code",cancel:"Cancel",save:"Save"}),n.a.addResources("es","GIError",{date:"The date is required"})},204:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Home",{title:"Basta de usar papel para tus comprobantes",body:"\xa1Ahora pod\xe9s hacer todo digital! Cre\xe1, guard\xe1, envi\xe1 comprobantes desde tu casa sin necesidad de contacto f\xedsico.",startNow:"\xa1Comenz\xe1 ahora!",currentTime:"Hora actual"}),n.a.addResources("en","Home",{title:"Stop using paper for your invoices",body:"\xa1Now you can do everything digitally! Create, save and send invoices from your house without the need of contact.",startNow:"\xa1Start now!",currentTime:"Current time"})},205:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Login",{verifyData:"Por favor, verifique los datos antes de continuar",error:"Ocurri\xf3 un error. Por favor, reintente",email:"Direcci\xf3n de E-mail",emailValidation:"Por favor, ingrese un E-mail v\xe1lido",password:"Contrase\xf1a",passwordValidation:"Por favor, ingrese su contrase\xf1a",login:"Iniciar sesi\xf3n"}),n.a.addResources("en","Login",{verifyData:"Please, verify the form before continuing",error:"There was an error. Please, retry",email:"E-mail address",emailValidation:"Please, enter a valid E-mail",password:"Password",passwordValidation:"Please, enter your password",login:"Log in"})},206:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Logout",{title:"Qu\xe9 l\xe1stima verte partir",body:"\xa1Ojal\xe1 podamos volverte a ver pronto!",goBack:"Volver a la p\xe1gina principal"}),n.a.addResources("en","Logout",{title:"It's sad to see you go",body:"We wish to see you soon again!",goBack:"Go back home"})},207:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","DownloadModal",{title:"\xa1Comprobante listo!",body:"Su comprobante ha sido generado con \xe9xito. \xbfDesea descargar una copia?",ignore:"Ignorar",download:"Descargar comprobante"}),n.a.addResources("en","DownloadModal",{title:"Invoice ready!",body:"Your invoice is ready! Wish to download a copy?",ignore:"Ignore",download:"Download"})},208:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Signature",{confirm:"\xbfConfirma el env\xedo de la firma a",success:"Se ha firmado correctamente. Ya puede salir de la App",greeting:"\xa1Hola!",received:"Recibi\xf3 esta boleta de",concept:"con el concepto de",amount:"por el momnto de",sign:"Firme en el campo en blanco para continuar",horizontal:"Coloque el tel\xe9fono de forma horizontal para mejor resultado",reset:"Reiniciar firma",send:"Enviar firma",alert:"\xa1No cierre esta p\xe1gina!",alertBody:"Cuando se genere el comprobante, aparecer\xe1 un bot\xf3n para descargar una copia"}),n.a.addResources("en","Signature",{confirm:"Do you really want to send this signature to",success:"Invoice signed correctly. You can now close this window",greeting:"Hello!",received:"You received this invoice from",concept:"with the concept of",amount:"by the amount of",sign:"Sign in the white letterbox",horizontal:"For a better result, turn your phone in landscape mode",reset:"Reset signature",send:"Send",alert:"Don't close this window!",alertBody:"When the invoice is completed, there will be a button to download a copy"})},209:function(e,a,t){"use strict";t.r(a);var n=t(3);n.a.addResources("es","Signup",{verifyForm:"Por favor, verifique los datos antes de continuar",error:"Ocurri\xf3 un error. Reintente, por favor.",title:"\xa1Registrese para obtener m\xe1s beneficios!",body:"Guardar comprobantes, marcar para firmarlos luego y envie por mail! Todos estos beneficios y m\xe1s siendo miembro premium.",name:"Nombre",nameValidation:"El nombre es requerido",email:"Direcci\xf3n de E-mail",emailValidation:"La direcci\xf3n de E-mail es requerida",password:"Contrase\xf1a",passwordValidation:"La contrase\xf1a es requerida",passwordConfirmation:"Repita la contrase\xf1a",passwordConfirmationValidation:"Es necesario que repita la contrase\xf1a correctamente",save:"Guardar",invalidToken:"Por favor, verifique el Captcha antes de continuar"}),n.a.addResources("en","Signup",{verifyForm:"Please, verify the data before continuing",error:"There was an error. Please, retry",title:"Register in order to get more benefits!",body:"Save benefits, mark them as pending and send them via e-mail! All of this and more benefits by becoming a premium member.",name:"Name",nameValidation:"The name is required",email:"E-mail address",emailValidation:"E-mail address is required",password:"Password",passwordValidation:"Password is required",passwordConfirmation:"Repeat password",passwordConfirmationValidation:"Is necessary that both passwords are the same",save:"Save",invalidToken:"Please, verify the Captcha before continuing"})},210:function(e,a,t){"use strict";t.r(a),t(3).a.addResources("es","Global",{send:"Enviar",close:"Cerrar",save:"Guardar"})},273:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t(0),r=t.n(c),s=t(27),o=t.n(s),i=t(15),d=t(12),l=t.n(d),j=(t(184),t(185),t(186),t(125)),u=t.n(j),b=t(23),h=(t(132),t(14)),m=t(13),O=t(16),p=t.n(O),g="https://recibapp.herokuapp.com/",x="https://reciba.app/",f=Object(c.createContext)({}),v=function(e){var a=e.children,t=Object(b.g)(),r=localStorage.getItem("bill-token"),s=Object(c.useState)({isLoggedIn:!1,level:9,token:"",name:""}),o=Object(m.a)(s,2),i=o[0],l=o[1];return r&&!i.isLoggedIn&&p.a.post("".concat(g,"api/user/loggedInUser"),{storedToken:r},{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){localStorage.setItem("bill-token",e.data.data.token),l({isLoggedIn:!0,level:9,token:e.data.data.token,name:e.data.data.name})})).catch((function(e){localStorage.removeItem("bill-token");var a=e.response?e.response.data.message:e.message;d.notify.show(a,"error"),l({isLoggedIn:!1,level:9,token:"",name:""}),t.push("/")})),Object(n.jsx)(f.Provider,{value:Object(h.a)(Object(h.a)({},i),{},{setUserData:l}),children:a})},y=t(282),w=t(283),I=t(163),N=t(164),S=t(10),C=t(11),k=t(29),D=t.n(k),L=t(3);function R(){return Object(n.jsx)(y.a,{children:Object(n.jsxs)(w.a,{className:"h-100-minus align-items-center",children:[Object(n.jsxs)(I.a,{children:[Object(n.jsxs)("h1",{children:[L.a.t("Home:title")," ",Object(n.jsx)("span",{role:"img","aria-label":"Page",children:"\ud83d\udcc3"})]}),Object(n.jsx)("p",{className:"lead",children:L.a.t("Home:body")}),Object(n.jsx)(i.c,{to:"/invoice/generate",children:Object(n.jsxs)(N.a,{children:[Object(n.jsx)(S.a,{icon:C.i})," ",L.a.t("Home:startNow")]})})]}),Object(n.jsxs)(I.a,{className:"text-right",children:[Object(n.jsxs)("h6",{children:[L.a.t("Home:currentTime"),":"]}),Object(n.jsx)("h3",{children:D()().format("MMMM Do YYYY, h:mm:ss a")})]})]})})}var P=t(37),T=t(293),F=t(165),E=t.n(F);function B(){var e=Object(b.g)(),a=Object(c.useContext)(f),t=Object(c.useState)({name:"",email:"",password:"",repeatPassword:"",token:""}),r=Object(m.a)(t,2),s=r[0],o=r[1],i=Object(c.useRef)(),l=Object(c.useState)(!1),j=Object(m.a)(l,2),u=j[0],O=j[1],x=function(e){var a=e.target,t=a.name,n=a.value;o(Object(h.a)(Object(h.a)({},s),{},Object(P.a)({},t,n)))};return Object(n.jsx)(y.a,{children:Object(n.jsxs)(w.a,{className:"h-100-minus align-items-center",children:[Object(n.jsxs)(I.a,{children:[Object(n.jsx)("h1",{children:L.a.t("Signup:title")}),Object(n.jsx)("p",{className:"lead",children:L.a.t("Signup:body")})]}),Object(n.jsx)(I.a,{className:"bg-light shadow p-3 rounded",children:Object(n.jsxs)(T.a,{noValidate:!0,validated:u,onSubmit:function(t){t.preventDefault();var n=t.currentTarget;s.token?!1===n.checkValidity()?(t.stopPropagation(),d.notify.show(L.a.t("Signup:verifyForm"),"error")):(t.stopPropagation(),p.a.post("".concat(g,"api/user/register"),{email:s.email,password:s.password,name:s.name,token:s.token}).then((function(t){t.data.success?p.a.post("".concat(g,"api/user/login"),{email:s.email,password:s.password}).then((function(t){var n=t.data;n.success?(i.current.resetCaptcha(),a.setUserData({isLoggedIn:!0,token:n.data.token,name:n.data.name}),localStorage.setItem("bill-token",n.data.token),d.notify.show("".concat(n.message),"success"),e.push("/")):d.notify.show(L.a.t("Signup:error"),"error")})).catch((function(e){d.notify.show("".concat(e.response.data.message),"error")})):d.notify.show("Error: ".concat(t.data.message),"error")})).catch((function(e){try{d.notify.show("".concat(e.response.data.message),"error")}catch(a){d.notify.show("".concat(a.message),"error")}}))):(t.stopPropagation(),d.notify.show(L.a.t("Signup:invalidToken"),"error")),O(!0)},children:[Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Signup:name")}),Object(n.jsx)(T.a.Control,{type:"text",name:"name",onChange:x,value:s.name,required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("Signup:nameValidation")})]}),Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Signup:email")}),Object(n.jsx)(T.a.Control,{type:"email",name:"email",onChange:x,value:s.email,required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("Signup:emailValidation")})]}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Signup:password")}),Object(n.jsx)(T.a.Control,{type:"password",name:"password",onChange:x,value:s.password,required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("Signup:passwordValidation")})]})}),Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Signup:passwordConfirmation")}),Object(n.jsx)(T.a.Control,{type:"password",name:"repeatPassword",onChange:x,value:s.repeatPassword,required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("Signup:PasswordConfirmationValidation")})]})})]}),Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:"Captcha!"}),Object(n.jsx)(E.a,{ref:i,sitekey:"be3fd67b-1a61-4936-b57f-600e3765988f",onVerify:function(e){return o(Object(h.a)(Object(h.a)({},s),{},{token:e}))},onExpire:function(){return o(Object(h.a)(Object(h.a)({},s),{},{token:""}))}})]}),Object(n.jsxs)(N.a,{variant:"primary",type:"submit",children:[Object(n.jsx)(S.a,{icon:C.a})," ",L.a.t("Signup:save")]})]})})]})})}function M(){var e=Object(c.useContext)(f),a=Object(c.useState)({email:"",password:""}),t=Object(m.a)(a,2),r=t[0],s=t[1],o=Object(c.useState)(!1),i=Object(m.a)(o,2),l=i[0],j=i[1],u=Object(b.g)(),O=function(e){var a=e.target,t=a.name,n=a.value;s(Object(h.a)(Object(h.a)({},r),{},Object(P.a)({},t,n)))};return Object(n.jsx)(y.a,{children:Object(n.jsxs)(w.a,{className:"h-100-minus align-items-center",children:[Object(n.jsx)(I.a,{}),Object(n.jsx)(I.a,{md:6,sm:12,className:"shadow rounded bg-light p-3",children:Object(n.jsxs)(T.a,{onSubmit:function(a){var t=a.currentTarget;a.preventDefault(),!1===t.checkValidity()?(a.stopPropagation(),d.notify.show(L.a.t("Login:verifyData"),"error")):(a.stopPropagation(),p.a.post("".concat(g,"api/user/login"),r).then((function(a){var t=a.data;t.success?(e.setUserData({isLoggedIn:!0,token:t.data.token,name:t.data.name}),localStorage.setItem("bill-token",t.data.token),d.notify.show("".concat(t.message),"success"),u.push("/")):d.notify.show(L.a.t("Login:error"),"error")})).catch((function(e){var a=e.response?e.response.data.message:e.message;d.notify.show("".concat(a),"error")}))),j(!0)},noValidate:!0,validated:l,children:[Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Login:email")}),Object(n.jsx)(T.a.Control,{type:"email",name:"email",value:r.email,onChange:O,required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("Login:emailValidation")})]}),Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Login:password")}),Object(n.jsx)(T.a.Control,{type:"password",name:"password",value:r.password,onChange:O,required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("Login:passwordValidation")})]}),Object(n.jsxs)(N.a,{variant:"primary",type:"submit",children:[Object(n.jsx)(S.a,{icon:C.b})," ",L.a.t("Login:login")]})]})}),Object(n.jsx)(I.a,{})]})})}function G(){var e=Object(c.useContext)(f),a=Object(b.g)();return Object(c.useEffect)((function(){localStorage.removeItem("bill-token"),e.setUserData({isLoggedIn:!1,level:9,token:"",name:""})}),[]),Object(n.jsx)(y.a,{children:Object(n.jsx)(w.a,{className:"h-100-minus align-items-center",children:Object(n.jsxs)(I.a,{className:"text-center",children:[Object(n.jsxs)("h1",{children:[L.a.t("Logout:title")," ",Object(n.jsx)("span",{role:"img","aria-label":"sad",children:"\ud83d\ude22"})]}),Object(n.jsxs)("p",{children:[" ",L.a.t("Logout:body")]}),Object(n.jsx)(N.a,{className:"mt-5",onClick:function(){return a.push("/")},children:L.a.t("Logout:goBack")})]})})})}var q=t(298),V=t(284),Y=t(296);function H(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(Y.a.Item,{children:Object(n.jsxs)(i.c,{className:"text-dark text-decoration-none",to:"/profile",children:[Object(n.jsx)(S.a,{icon:C.w,className:"mr-1"})," ",L.a.t("LoggedInOpts:profile")]})}),Object(n.jsx)(Y.a.Item,{children:Object(n.jsxs)(i.c,{className:"text-dark text-decoration-none",to:"/logout",children:[Object(n.jsx)(S.a,{icon:C.d,className:"mr-1"})," ",L.a.t("LoggedInOpts:closeSession")]})})]})}function A(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(Y.a.Item,{children:Object(n.jsxs)(i.c,{className:"text-dark text-decoration-none",to:"/login",children:[Object(n.jsx)(S.a,{icon:C.v,className:"mr-1"})," ",L.a.t("LoggedOutOpts:login")]})}),Object(n.jsx)(Y.a.Item,{children:Object(n.jsxs)(i.c,{className:"text-dark text-decoration-none",to:"/signup",children:[Object(n.jsx)(S.a,{icon:C.x,className:"mr-1"})," ",L.a.t("LoggedOutOpts:signUp")]})})]})}function U(){return Object(n.jsxs)(V.a,{className:"mr-auto",children:[Object(n.jsxs)(i.c,{className:"text-light mr-3 text-decoration-none",to:"/",children:[Object(n.jsx)(S.a,{icon:C.h})," ",L.a.t("LoggedInOpts:home")]}),Object(n.jsxs)(i.c,{className:"text-light mr-3 text-decoration-none",to:"/invoice/generate",children:[Object(n.jsx)(S.a,{icon:C.m})," ",L.a.t("LoggedInOpts:newInvoice")]}),Object(n.jsxs)(i.c,{className:"text-light mr-3 text-decoration-none",to:"/dashboard",children:[Object(n.jsx)(S.a,{icon:C.c})," ",L.a.t("LoggedInOpts:dashboard")]})]})}function z(){return Object(n.jsx)(V.a,{className:"mr-auto",children:Object(n.jsxs)(i.c,{className:"text-light mr-3 text-decoration-none",to:"/",children:[Object(n.jsx)(S.a,{icon:C.h})," ",L.a.t("LoggedInOpts:home")]})})}function _(){var e=Object(c.useContext)(f);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(q.a,{fixed:"top",style:{zIndex:999},bg:"primary",variant:"dark",expand:"lg",children:[Object(n.jsx)(i.c,{to:"/",children:Object(n.jsx)(q.a.Brand,{children:"reciba.app"})}),Object(n.jsx)(q.a.Toggle,{}),Object(n.jsxs)(q.a.Collapse,{children:[e.isLoggedIn?Object(n.jsx)(U,{}):Object(n.jsx)(z,{}),Object(n.jsx)(V.a,{className:"ml-auto",children:Object(n.jsx)(Y.a,{title:"".concat(L.a.t("NavBar:actualUser"),": ").concat(e.isLoggedIn?e.name:L.a.t("NavBar:guest")),id:"collasible-nav-dropdown",children:e.isLoggedIn?Object(n.jsx)(H,{}):Object(n.jsx)(A,{})})})]})]}),Object(n.jsx)("div",{style:{height:35}})]})}var Q=t(297),W=Object(c.createContext)({generateId:function(){return""},currentId:""});function J(e){var a=e.children,t=Object(c.useState)(""),r=Object(m.a)(t,1)[0];return Object(n.jsx)(W.Provider,{value:{generateId:function(){return Object(Q.a)()},currentId:r},children:a})}var $=t(299),K=t(303);function X(e){return e.toString().substr(0,10)}function Z(e){var a=e.submitFilter,t=e.isLoading,r=e.setIsLoading,s=Object(c.useState)({from:"",to:"",tags:""}),o=Object(m.a)(s,2),i=o[0],d=o[1],l=function(e){var a=e.target,t=a.name,n=a.value;d(Object(h.a)(Object(h.a)({},i),{},Object(P.a)({},t,n)))};return Object(n.jsx)(I.a,{className:"bg-white rounded shadow p-3 mb-3",children:Object(n.jsx)($.a,{children:Object(n.jsxs)(K.a,{children:[Object(n.jsxs)($.a.Toggle,{as:K.a.Header,eventKey:"0",children:[L.a.t("Filter:filter")," ",i.from||i.to?Object(n.jsx)("small",{className:"text-muted border rounded p-1",children:"".concat(i.from?"".concat(L.a.t("Filter:from"),": ").concat(D()(X(i.from)).format("L")):""," ").concat(i.to?"".concat(L.a.t("Filter:to"),": ").concat(D()(X(i.to)).format("L")):"")}):Object(n.jsx)("small",{className:"text-muted border rounded p-1",children:"".concat(L.a.t("Filter:title")," ").concat(Intl.DateTimeFormat(navigator.language,{month:"long"}).format(new Date))})]}),Object(n.jsx)($.a.Collapse,{eventKey:"0",children:Object(n.jsx)(K.a.Body,{children:Object(n.jsxs)(T.a,{onSubmit:function(e){e.preventDefault(),r(!0),a({from:i.from?D()(i.from).startOf("day").format("YYYY-MM-DD"):"undefined",to:i.to?D()(i.to).endOf("day").format("YYYY-MM-DD"):"undefined",tags:i.tags})},children:[Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Filter:tag")}),Object(n.jsx)(T.a.Control,{name:"tags",value:i.tags,onChange:l,type:"text"})]})}),Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Filter:from")}),Object(n.jsx)(T.a.Control,{type:"date",onChange:l,name:"from",value:i.from})]})}),Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Filter:to")}),Object(n.jsx)(T.a.Control,{type:"date",onChange:l,name:"to",value:i.to})]})})]}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(I.a,{className:"d-flex justify-content-end w-100",children:[Object(n.jsxs)(N.a,{disabled:t,className:"mr-3",variant:"success",type:"submit",children:[Object(n.jsx)(S.a,{icon:C.q})," ",L.a.t("Filter:search")]}),Object(n.jsxs)(N.a,{disabled:t,onClick:function(){r(!0),a({}),d({from:"",to:"",tags:""})},variant:"danger",children:[Object(n.jsx)(S.a,{icon:C.t})," ",L.a.t("Filter:cleanSearch")]})]})})]})})})]})})})}var ee=t(106),ae=t(304),te=t(285),ne=t(300),ce=t(286);function re(){return Object(n.jsx)(y.a,{children:Object(n.jsxs)(w.a,{style:{height:"65vh"},children:[Object(n.jsx)(I.a,{}),Object(n.jsxs)(I.a,{md:2,className:"my-auto shadow bg-light rounded py-4",children:[Object(n.jsx)("div",{className:"m-auto",style:{width:"4rem",height:"4rem"},children:Object(n.jsx)("div",{className:"spinner"})}),Object(n.jsxs)("h1",{className:"mt-3 lead text-gray text-center",children:[L.a.t("LoadingScreen:text"),"..."]})]}),Object(n.jsx)(I.a,{})]})})}var se=t(166),oe=t(292);function ie(e){var a=e.show,t=e.handleClose,r=e.invoiceId,s=e.prevTags,o=e.refreshData,i=Object(c.useState)(""),l=Object(m.a)(i,2),j=l[0],u=l[1];Object(c.useEffect)((function(){s!==[]&&u(s?s.toString():"")}),[r]);return Object(n.jsx)(oe.a,{show:a,onHide:t,children:Object(n.jsxs)(T.a,{onSubmit:function(e){e.preventDefault();var a,n=j.split(","),c=[],s=Object(se.a)(n);try{for(s.s();!(a=s.n()).done;){var i=a.value;c.push(i.trim())}}catch(l){s.e(l)}finally{s.f()}!function(e){if(""===r)throw Error("No hay invoice id especificado");p.a.put("".concat(g,"api/invoice/edit/").concat(r),{tags:e},{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){e.data,d.notify.show("Datos guardados","success"),o(),t()})).catch((function(e){d.notify.show(e.message,"error")}))}(c)},children:[Object(n.jsx)(oe.a.Header,{closeButton:!0,children:Object(n.jsx)(oe.a.Title,{children:L.a.t("Tags:title")})}),Object(n.jsx)(oe.a.Body,{children:Object(n.jsxs)(T.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Tags:label")}),Object(n.jsx)(T.a.Control,{type:"text",value:j,onChange:function(e){return u(e.target.value)},placeholder:L.a.t("Tags:placeholder")})]})}),Object(n.jsxs)(oe.a.Footer,{children:[Object(n.jsxs)(N.a,{variant:"secondary",onClick:t,children:[Object(n.jsx)(S.a,{icon:C.t})," ",L.a.t("Tags:close")]}),Object(n.jsxs)(N.a,{variant:"primary",type:"submit",children:[Object(n.jsx)(S.a,{icon:C.p})," ",L.a.t("Tags:save")]})]})]})})}var de=function(e){var a=e.resetData,t=e.show,r=e.data,s=Object(c.useState)(""),o=Object(m.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)(!1),u=Object(m.a)(j,2),b=u[0],h=u[1];return Object(n.jsxs)(oe.a,{size:"xl",show:t,onHide:function(){a(),l("")},children:[Object(n.jsx)(oe.a.Header,{closeButton:!0,children:Object(n.jsx)(oe.a.Title,{children:L.a.t("Mail:title")})}),Object(n.jsxs)(T.a,{onSubmit:function(e){e.preventDefault(),h(!0),""===i?(d.notify.show(L.a.t("Mail:noValue"),"error"),h(!1)):p.a.post("".concat(g,"api/mail/send/signaturePetition/"),{invoiceId:r.invoice,from:r.from,to:i}).then((function(e){e.data.success?(d.notify.show(e.data.message,"success"),h(!1),l(""),a()):(d.notify.show(e.data.message,"warning"),h(!1))})).catch((function(e){d.notify.show(L.a.t("Mail:cantSend"),"error"),h(!1)}))},children:[Object(n.jsx)(oe.a.Body,{children:Object(n.jsxs)(T.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsxs)(T.a.Label,{children:[L.a.t("Mail:address"),":"]}),Object(n.jsx)(T.a.Control,{type:"email",value:i,onChange:function(e){return l(e.target.value)}}),Object(n.jsxs)(T.a.Text,{className:"text-muted",children:[L.a.t("Mail:linkText"),":"," ",Object(n.jsx)("a",{href:"".concat(x,"#/offlinesignature/").concat(r.invoice),children:"".concat(x,"#/offlinesignature/").concat(r.invoice)})]})]})}),Object(n.jsxs)(oe.a.Footer,{children:[Object(n.jsxs)(N.a,{disabled:b,onClick:function(){a(),l("")},variant:"secondary",children:[Object(n.jsx)(S.a,{icon:C.t})," ",L.a.t("Mail:close")]}),Object(n.jsxs)(N.a,{disabled:b,type:"submit",variant:"primary",children:[Object(n.jsx)(S.a,{icon:C.j})," ",b?L.a.t("Mail:loading"):L.a.t("Mail:send")]})]})]})]})};function le(e){var a=e.completed,t=e.pending,r=e.deleteBill,s=e.refreshData,o=e.isLoading,i=Object(b.g)(),d=Object(c.useState)({invoice:"",from:""}),l=Object(m.a)(d,2),j=l[0],u=l[1],h=Object(c.useState)(!1),O=Object(m.a)(h,2),p=O[0],g=O[1],x=Object(c.useState)({id:"",prevTags:[]}),f=Object(m.a)(x,2),v=f[0],y=f[1],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];y({id:e,prevTags:a}),g((function(e){return!e}))};return o?Object(n.jsx)(re,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(de,{resetData:function(){u({invoice:"",from:""}),s({from:"",to:"",tags:""})},show:""!==j.invoice&&""!==j.from,data:j}),Object(n.jsx)(ie,{show:p,handleClose:function(){return N()},invoiceId:v.id,prevTags:v.prevTags,refreshData:function(){return s({})}}),Object(n.jsxs)(I.a,{className:"bg-white rounded shadow p-3 mb-3",children:[Object(n.jsx)("small",{className:"text-muted",children:"".concat(L.a.t("Invoices:pending")," - ").concat(t.length)}),Object(n.jsx)(ae.a,{children:t.map((function(e){var a,t,c;return Object(n.jsx)(ae.a.Item,{children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{md:"2",children:D()(X(e.date)).format("L")}),Object(n.jsxs)(I.a,{children:[e.from," ",Object(n.jsxs)("small",{children:["(",e.currency," $",e.amount,")"]}),null===(a=e.tags)||void 0===a?void 0:a.map((function(e){return Object(n.jsx)(te.a,{variant:"info",className:"ml-1",children:e},Math.random())}))," ",(null===(t=e.alreadySent)||void 0===t?void 0:t.isAlreadySent)?Object(n.jsx)(ne.a,{placement:"top",overlay:Object(n.jsx)(ce.a,{id:"mail-already-sent",children:"".concat(L.a.t("Invoices:mail"),": ").concat(null===(c=e.alreadySent)||void 0===c?void 0:c.emailAddress)}),children:Object(n.jsx)(S.a,{icon:ee.a,style:{color:"#6DB65B"}})}):null]}),Object(n.jsxs)(I.a,{md:"2",className:"text-right text-primary",children:[Object(n.jsx)(S.a,{icon:C.s,className:"pointer",onClick:function(){return N(e._id,e.tags)}}),Object(n.jsx)(S.a,{onClick:function(){return i.push("/invoice/edit/".concat(e._id,"/"))},className:"pointer mx-3",icon:C.k}),Object(n.jsx)(S.a,{onClick:function(){return r(e._id)},className:"pointer mr-3",icon:C.u}),Object(n.jsx)(S.a,{className:"pointer",onClick:function(){return u({invoice:e._id?e._id:"",from:e.from})},icon:C.j})]})]})},Math.random())}))}),Object(n.jsx)("hr",{}),Object(n.jsx)("small",{className:"text-muted",children:"".concat(L.a.t("Invoices:completed")," - ").concat(a.length)}),Object(n.jsx)(ae.a,{children:a.map((function(e){var a;return Object(n.jsxs)(ae.a.Item,{children:[Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{md:"2",children:D()(X(e.date)).format("L")}),Object(n.jsxs)(I.a,{children:[e.from," ",Object(n.jsxs)("small",{children:["(",e.currency," $",e.amount,")"]}),null===(a=e.tags)||void 0===a?void 0:a.map((function(e){return Object(n.jsx)(te.a,{variant:"info",className:"ml-1",children:e},Math.random())}))," "]}),Object(n.jsxs)(I.a,{md:"2",className:"text-right text-primary",children:[Object(n.jsx)(S.a,{className:"pointer",icon:C.s,onClick:function(){return N(e._id,e.tags)}}),Object(n.jsx)(S.a,{onClick:function(){return i.push("/invoice/edit/".concat(e._id,"/"))},className:"ml-3 pointer",icon:C.k}),Object(n.jsx)(S.a,{onClick:function(){return i.push("/invoice/display/".concat(e._id,"/no"))},icon:C.n,className:"mx-3 pointer"}),Object(n.jsx)(S.a,{onClick:function(){return r(e._id)},className:"pointer",icon:C.u})]})]})," "]},Math.random())}))})]})]})}function je(){var e=Object(b.g)(),a=Object(c.useState)([]),t=Object(m.a)(a,2),r=t[0],s=t[1],o=Object(c.useState)([]),i=Object(m.a)(o,2),l=i[0],j=i[1],u=Object(c.useState)(!0),h=Object(m.a)(u,2),O=h[0],x=h[1],f={headers:{auth:localStorage.getItem("bill-token")}},v=function(a){var t=p.a.get("".concat(g,"api/invoice/completed?from=").concat(a.from,"&to=").concat(a.to,"&tags=").concat(a.tags),f),n=p.a.get("".concat(g,"api/invoice/pending?from=").concat(a.from,"&to=").concat(a.to,"&tags=").concat(a.tags),f);p.a.all([t,n]).then(p.a.spread((function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];j(a[0].data.data),s(a[1].data.data),x(!1)}))).catch((function(a){d.notify.show(L.a.t("Dashboard:queryError"),"error"),e.push("/")}))};return Object(c.useEffect)((function(){x(!0),v({})}),[]),Object(n.jsx)(y.a,{className:"my-5",children:Object(n.jsx)(w.a,{className:"h-100-minus",children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)(Z,{isLoading:O,setIsLoading:function(e){return x(e)},submitFilter:function(e){return v(e)}}),Object(n.jsx)(le,{isLoading:O,refreshData:function(e){return v(e)},deleteBill:function(e){return function(e){void 0!==e&&window.confirm(L.a.t("Dashboard:deleteBill"))&&p.a.delete("".concat(g,"api/invoice/").concat(e),f).then((function(e){e.data.success?(d.notify.show(L.a.t("Dashboard:deleteConfirm"),"success"),v({})):d.notify.show(e.data.message,"warning")})).catch((function(e){d.notify.show(e.response.data.message,"error")}))}(e)},completed:l,pending:r})]})})})}var ue=t(167),be=function(e){var a=e.render,t=Object(ue.a)(e,["render"]),r=Object(c.useContext)(f);return Object(n.jsx)(b.b,Object(h.a)(Object(h.a)({},t),{},{render:function(e){return r.isLoggedIn||localStorage.getItem("bill-token")?Object(n.jsx)(a,Object(h.a)({},e)):Object(n.jsx)(b.a,{to:"/"})}}))},he=t(73),me=t.n(he);function Oe(e){var a=e.show,t=e.handleClose,c=e.PDFFile;return Object(n.jsxs)(oe.a,{show:a,onHide:t,children:[Object(n.jsx)(oe.a.Header,{closeButton:!0,children:Object(n.jsx)(oe.a.Title,{children:L.a.t("DownloadModal:title")})}),Object(n.jsxs)(oe.a.Body,{children:[L.a.t("DownloadModal:body")," "]}),Object(n.jsxs)(oe.a.Footer,{children:[Object(n.jsxs)(N.a,{variant:"secondary",onClick:t,children:[Object(n.jsx)(S.a,{icon:ee.b})," ",L.a.t("DownloadModal:ignore")]}),Object(n.jsx)("a",{download:"Comprobante.pdf",href:c,children:Object(n.jsxs)(N.a,{children:[Object(n.jsx)(S.a,{icon:C.e})," ",L.a.t("DownloadModal:download")]})})]})]})}var pe,ge=t(265);function xe(){var e=Object(c.useRef)(),a=Object(b.h)(),t=a.socketId,r=a.invoiceId,s=Object(c.useState)(!1),o=Object(m.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)(""),u=Object(m.a)(j,2),O=u[0],x=u[1],f=Object(c.useState)({}),v=Object(m.a)(f,2),k=v[0],D=v[1];Object(c.useEffect)((function(){return t?((pe=me()(g)).emit("join",t),pe.emit("close",!1),pe.on("pdf",(function(e){x(e),P()}))):r&&p.a.get("".concat(g,"api/invoice/single/").concat(r)).then((function(e){var a=e.data;a.success&&D(a.data)})).catch((function(e){return alert(e.response.data.message)})),function(){t&&pe.off("pdf")}}),[g]);var R=function(){t&&pe.emit("sign",e.current.toDataURL())},P=function(){l(!i)};return Object(n.jsxs)(y.a,{className:"h-100-minus mt-5",children:[Object(n.jsx)(Oe,{PDFFile:O,show:i,handleClose:P}),Object(n.jsx)(w.a,{className:r?"d-block":"d-none",children:Object(n.jsxs)(I.a,{className:"text-center",children:[Object(n.jsx)("h1",{children:L.a.t("Signature:greeting")}),Object(n.jsxs)("p",{children:[L.a.t("Signature:received")," ",Object(n.jsx)("strong",{children:k.from})," ",L.a.t("Signature:concept")," ",Object(n.jsx)("strong",{children:k.concept})," ",L.a.t("Signature:amount")," ",Object(n.jsxs)("strong",{children:[k.currency," ",k.amount]})]}),Object(n.jsx)("hr",{})]})}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(I.a,{className:"text-center",children:[Object(n.jsx)("p",{className:"lead m-0",children:L.a.t("Signature:sign")}),Object(n.jsx)("small",{className:"text-muted",children:L.a.t("Signature:horizontal")})]})}),Object(n.jsx)(w.a,{className:"my-5",children:Object(n.jsx)(I.a,{onTouchEnd:R,onMouseUp:R,className:"bg-white shadow rounded",children:Object(n.jsx)(ge,{ref:e})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsxs)(N.a,{className:"w-100",variant:"danger",onClick:function(){e.current.clear(),R()},children:[Object(n.jsx)(S.a,{icon:C.t})," ",L.a.t("Signature:reset")]})}),Object(n.jsx)(I.a,{className:r?"d-block":"d-none",children:Object(n.jsxs)(N.a,{className:"w-100",variant:"success",onClick:function(){window.confirm("".concat(L.a.t("Signature:confirm")," ").concat(k.from,"?"))&&p.a.put("".concat(g,"api/invoice/addSignature/").concat(r),Object(h.a)(Object(h.a)({},k),{},{sign:e.current.toDataURL()})).then((function(e){d.notify.show(L.a.t("Signature:success"),"success")})).catch((function(e){var a=e.response?e.response.data.message:e.message;d.notify.show(a,"error")}))},children:[Object(n.jsx)(S.a,{icon:C.r})," ",L.a.t("Signature:send")]})})]}),Object(n.jsx)(w.a,{className:t?"d-block my-5 text-center":"d-none",children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)("p",{className:"lead",children:L.a.t("Signature:alert")}),Object(n.jsxs)("p",{children:[L.a.t("Signature:alertBody")," "]})]})})]})}var fe,ve=t(62),ye=t.n(ve),we=t(86),Ie=t(171),Ne=t(294),Se=t(301);function Ce(e){var a=e.sendEmail,t=e.setRecipient,c=e.recipient,r=e.validated;return Object(n.jsx)(I.a,{className:"px-5 py-3 bg-white shadow rounded",children:Object(n.jsxs)(T.a,{noValidate:!0,onSubmit:a,validated:r,children:[Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("EmailInput:title")}),Object(n.jsx)(T.a.Control,{type:"email",value:c,onChange:t,placeholder:L.a.t("EmailInput:placeholder"),required:!0}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("EmailInput:error")})]}),Object(n.jsxs)(N.a,{variant:"primary",type:"submit",children:[Object(n.jsx)(S.a,{icon:C.j})," ",L.a.t("EmailInput:send")]})]})})}function ke(e){var a=e.exportPDFToFile,t=e.transformPDFToBase64,c=e.toggleEmailInput,r=e.hasSocketId;return Object(n.jsxs)(I.a,{className:"p-3 bg-light text-center shadow rounded",children:[Object(n.jsxs)(N.a,{className:"mx-2",onClick:a,children:[Object(n.jsx)(S.a,{icon:C.g})," ",L.a.t("Buttons:download")]}),Object(n.jsxs)(N.a,{disabled:r,className:"mx-2",onClick:t,children:[Object(n.jsx)(S.a,{icon:C.l})," ",L.a.t("Buttons:sendToPhone")]}),Object(n.jsxs)(N.a,{onClick:c,className:"mx-2",children:[Object(n.jsx)(S.a,{icon:C.f})," ",L.a.t("Buttons:sendToMail")]})]})}function De(e){var a=e.isOriginal,t=void 0!==a&&a,c=e.data;return Object(n.jsxs)(w.a,{className:"pdf-font my-5 py-5 bg-white",children:[Object(n.jsx)(I.a,{md:1,children:Object(n.jsx)("p",{className:"text-muted p-0 mb-0 text-center",style:{height:64,marginTop:150,width:109,paddingLeft:0},children:t?L.a.t("Invoice:originalInvoice"):L.a.t("Invoice:duplicateInvoice")})}),Object(n.jsxs)(I.a,{className:"px-5",children:[Object(n.jsxs)(w.a,{className:"border-bottom mt-3 pb-3",children:[Object(n.jsx)(I.a,{children:c.logo?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{src:c.logo,alt:"RollingCode School",height:"50"}),Object(n.jsxs)("p",{className:"text-monospace",children:[L.a.t("Invoice:receiptNumber"),": ",c.invoiceNumber]})]}):Object(n.jsxs)("p",{className:"text-monospace",children:[L.a.t("Invoice:receiptNumber"),":",c.invoiceNumber]})}),Object(n.jsx)(I.a,{md:"2"}),Object(n.jsx)(I.a,{className:"text-center",children:Object(n.jsxs)("p",{className:"my-0",children:[Object(n.jsxs)("strong",{children:[L.a.t("Invoice:date"),": "]}),D()(c.date).format("MMMM Do [del] YYYY")]})})]}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(I.a,{children:[Object(n.jsxs)(w.a,{className:"bg-light my-3",children:[Object(n.jsx)(I.a,{md:3,children:Object(n.jsx)("p",{className:"text-center my-2",children:Object(n.jsx)("strong",{children:L.a.t("Invoice:received")})})}),Object(n.jsx)(I.a,{children:Object(n.jsxs)("p",{className:"my-2",children:[Object(n.jsxs)("strong",{children:[L.a.t("Invoice:from"),": "]}),c.from]})})]}),Object(n.jsx)(w.a,{className:"bg-light my-3",children:Object(n.jsx)(I.a,{children:Object(n.jsxs)("p",{className:"my-2",children:[Object(n.jsxs)("strong",{children:[L.a.t("Invoice:quantity"),": "]}),c.amountText]})})}),Object(n.jsx)(w.a,{className:"bg-light my-3",children:Object(n.jsx)(I.a,{children:Object(n.jsxs)("p",{className:"my-2",children:[Object(n.jsxs)("strong",{children:[L.a.t("Invoice:inConceptOf"),": "]})," ",c.concept]})})})]})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{md:2,className:"bg-light",children:Object(n.jsxs)("p",{className:"my-2",children:[Object(n.jsx)("strong",{children:"Son: "})," ",c.currency," $",c.amount]})}),Object(n.jsx)(I.a,{}),Object(n.jsx)(I.a,{md:6,className:"bg-light",children:Object(n.jsxs)("p",{className:"my-2",children:[Object(n.jsxs)("strong",{children:[L.a.t("Invoice:receiptBy"),": "]}),Object(n.jsx)("img",{src:c.sign,height:"120",alt:"signature"})]})})]})]})]})}function Le(){var e=Object(c.useRef)(Object(n.jsx)("div",{})),a=Object(b.h)(),t=a.id,r=a.socketId,s=Object(c.useState)({invoiceNumber:1,logo:"",date:new Date,from:"",amountText:"",amount:0,concept:"",sign:"",currency:"ARS",pending:!1}),o=Object(m.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)(!1),u=Object(m.a)(j,2),O=u[0],x=u[1],f=Object(c.useState)(""),v=Object(m.a)(f,2),I=v[0],N=v[1],S=Object(c.useState)(!1),C=Object(m.a)(S,2),k=C[0],D=C[1],R=function(){return Object(Ne.a)(e.current,{paperSize:"A4",landscape:!0,scale:.75}).then((function(e){return Object(Se.a)(e)}))},P=function(){var e=Object(we.a)(ye.a.mark((function e(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fe,e.next=3,R();case 3:e.t1=e.sent,e.t0.emit.call(e.t0,"pdf",e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(we.a)(ye.a.mark((function e(a){var t,n;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=a.currentTarget,e.next=4,R();case 4:n=e.sent,!0===t.checkValidity()&&p.a.post("".concat(g,"api/mail/send/invoice"),{file:n,date:i.date,email:I}).then((function(e){var a=e.data,t=a.success,n=a.message;t?d.notify.show(n,"success"):d.notify.show(n,"error")})).catch((function(e){d.notify.show(L.a.t("DisplayInvoice:error"),"error")})),D(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return fe=me()(g),p.a.get("".concat(g,"api/invoice/single/").concat(t)).then((function(e){var a=e.data,t=function(e){var a=e.slice(0,10).split("-");return{year:parseInt(a[0]),month:parseInt(a[1],10)-1,date:parseInt(a[2])}}(a.data.date),n=t.year,c=t.month,r=t.date;l(Object(h.a)(Object(h.a)({},a.data),{},{date:new Date(n,c,r)}))})),fe.emit("join",r),function(){fe.off("join")}}),[g]),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(w.a,{className:"my-5",children:Object(n.jsx)(ke,{exportPDFToFile:function(){Object(Ie.a)(e.current,{paperSize:"A4",fileName:"Invoice - ".concat(Intl.DateTimeFormat(navigator.language,{month:"numeric",day:"numeric",year:"numeric"}).format(new Date(i.date))," - ").concat(t),landscape:!0,scale:.75})},transformPDFToBase64:P,toggleEmailInput:function(){return x(!O)},hasSocketId:"no"===r})}),Object(n.jsx)(w.a,{className:O?"d-block":"d-none",children:Object(n.jsx)(Ce,{recipient:I,sendEmail:function(e){return T(e)},setRecipient:function(e){return N(e.target.value)},validated:k})}),Object(n.jsxs)("div",{ref:e,children:[Object(n.jsx)(De,{data:i,isOriginal:!0}),Object(n.jsx)(De,{data:i})]})]})}var Re,Pe,Te=t(290),Fe=t(291),Ee=t(170),Be=t.n(Ee);function Me(e){var a=e.show,t=void 0===a||a,c=e.onHide,r=void 0===c?function(){return!t}:c,s=e.currentId,o=void 0===s?"Error":s;return Object(n.jsx)(oe.a,{size:"xl",show:t,onHide:r,children:Object(n.jsxs)(oe.a.Body,{children:[Object(n.jsx)(w.a,{children:Object(n.jsx)(I.a,{children:Object(n.jsx)("p",{className:"lead text-center",children:L.a.t("QR:body")})})}),Object(n.jsxs)(w.a,{className:"my-5",children:[Object(n.jsx)(I.a,{}),Object(n.jsx)(I.a,{className:"bg-white shadow rounded p-3",md:3,children:Object(n.jsx)(Be.a,{size:200,value:"".concat(x,"#/signature/").concat(o)})}),Object(n.jsx)(I.a,{})]}),Object(n.jsx)(w.a,{children:Object(n.jsx)(I.a,{className:"text-center",children:Object(n.jsxs)("small",{children:[L.a.t("QR:alternative")," ",Object(n.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(x,"#/signature/").concat(o),children:"".concat(x,"#/signature/").concat(o)})]})})}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(I.a,{className:"text-center",children:[Object(n.jsxs)("p",{className:"lead",children:[L.a.t("QR:finishing")," "]}),Object(n.jsxs)(N.a,{onClick:r,children:[Object(n.jsx)(S.a,{icon:C.t})," ",L.a.t("QR:close")]})]})})]})})}function Ge(){var e=(new Date).toISOString().substr(0,10),a=localStorage.getItem("bill-token")?{headers:{auth:localStorage.getItem("bill-token")}}:void 0,t=Object(b.h)().id,r=Object(c.useContext)(W).generateId,s=Object(c.useContext)(f).isLoggedIn,o=Object(c.useState)({invoiceNumber:1,date:e,from:"",amountText:"",amount:0,concept:"",currency:"ARS",pending:!1,sign:""}),i=Object(m.a)(o,2),l=i[0],j=i[1],u=Object(c.useState)(!1),O=Object(m.a)(u,2),x=O[0],v=O[1],k=Object(c.useState)(!1),D=Object(m.a)(k,2),R=D[0],F=D[1],E=Object(c.useState)(!1),B=Object(m.a)(E,2),M=B[0],G=B[1],q=Object(b.g)(),V=function(e){var a=e.target,t=a.name,n=a.value,c=a.type,r=a.checked,s="checkbox"===c?r:n;j(Object(h.a)(Object(h.a)({},l),{},Object(P.a)({},t,s)))};Object(c.useEffect)((function(){return Re=me()(g),t&&p.a.get("".concat(g,"api/invoice/single/").concat(t)).then((function(e){var a=e.data,t=a.data.date.substr(0,10);j(Object(h.a)(Object(h.a)({},a.data),{},{date:t}))})),Re.on("close",(function(){F(!1),d.notify.show(L.a.t("GenerateInvoice:phoneConnected"),"success")})),Re.on("sign",(function(e){j((function(a){return Object(h.a)(Object(h.a)({},a),{},{sign:e,pending:!1})}))})),function(){Re.disconnect(),Pe=""}}),[g]);var Y=function(){var e=Object(we.a)(ye.a.mark((function e(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pe||(Pe=r(),Re.emit("join",Pe)),F((function(e){return!e}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(y.a,{children:[Object(n.jsx)(Me,{currentId:Pe,show:R,onHide:function(){F((function(e){return!e}))}}),Object(n.jsx)(w.a,{className:"h-100-minus align-items-center",children:Object(n.jsx)(I.a,{className:"bg-light p-3 shadow rounded",children:Object(n.jsxs)(T.a,{noValidate:!0,validated:x,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),G(!0);var n=e.currentTarget;return l.sign||l.pending?(!1===n.checkValidity()?d.notify.show(L.a.t("GenerateInvoice:verifyForm"),"error"):t?p.a.put("".concat(g,"api/invoice/edit/").concat(t),Object(h.a)(Object(h.a)({},l),{},{pending:""===l.sign}),{headers:{auth:localStorage.getItem("bill-token")}}).then((function(e){var a=e.data;a.success&&a.data._id&&q.push(l.pending?"/dashboard":"/invoice/display/".concat(a.data._id,"/").concat(Pe)),d.notify.show(a.message,"success")})).catch((function(e){d.notify.show(L.a.t("GenerateInvoice:errorCreatingInvoice"),"error")})):p.a.post("".concat(g,"api/invoice/"),Object(h.a)({},l),a).then((function(e){var a=e.data;a.id&&q.push(l.pending?"/dashboard":"/invoice/display/".concat(a.id,"/").concat(Pe)),d.notify.show(a.message,"success")})).catch((function(e){d.notify.show(L.a.t("GenerateInvoice:errorCreatingInvoice"),"error")})),G(!1),v(!0),!1):(d.notify.show(L.a.t("GenerateInvoice:signatureNeeded"),"error"),G(!1),null)},children:[Object(n.jsx)(w.a,{children:Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Invoice:date")}),Object(n.jsx)(T.a.Control,{required:!0,name:"date",onChange:V,value:l.date.toString(),type:"date"}),Object(n.jsx)(T.a.Control.Feedback,{type:"invalid",children:L.a.t("GIError:date")})]})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{md:"3",children:Object(n.jsx)("p",{className:"text-center",children:L.a.t("Invoice:received")})}),Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Invoice:from")}),Object(n.jsx)(T.a.Control,{required:!0,name:"from",onChange:V,value:l.from,type:"text"})]})})]}),Object(n.jsx)(w.a,{children:Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Invoice:quantity")}),Object(n.jsx)(T.a.Control,{required:!0,name:"amountText",onChange:V,value:l.amountText,type:"text"})]})})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(I.a,{children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Invoice:inConceptOf")}),Object(n.jsx)(T.a.Control,{required:!0,name:"concept",onChange:V,value:l.concept,type:"text"})]})})}),Object(n.jsxs)(w.a,{children:[Object(n.jsx)(I.a,{sm:12,md:3,children:Object(n.jsxs)(T.a.Group,{children:[Object(n.jsx)(T.a.Label,{children:L.a.t("Invoice:quantity")}),Object(n.jsxs)(Te.a,{children:[Object(n.jsx)(Te.a.Prepend,{children:Object(n.jsx)(Te.a.Text,{children:Object(n.jsxs)("select",{name:"currency",onChange:V,value:l.currency,className:"no-decoration",children:[Object(n.jsx)("option",{children:"ARS"}),Object(n.jsx)("option",{children:"USD"})]})})}),Object(n.jsx)(T.a.Control,{required:!0,name:"amount",onChange:V,value:l.amount,min:1,type:"decimal"})]})]})}),Object(n.jsx)(I.a,{className:"text-right",children:Object(n.jsx)("p",{className:"lead",children:L.a.t("Invoice:signature")})}),Object(n.jsx)(I.a,{children:l.sign?Object(n.jsx)("img",{height:"100",src:l.sign,alt:"signature"}):null})]}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(I.a,{className:"text-right d-flex align-items-center justify-content-end",children:[s?Object(n.jsx)("fieldset",{className:"mr-3 py-1 px-2 border border-gray rounded",children:Object(n.jsxs)("label",{htmlFor:"pending",className:"m-0 p-0",children:[Object(n.jsx)("input",{id:"pending",type:"checkbox",name:"pending",checked:l.pending,onChange:V,className:"mr-1 p-0 m-0"}),L.a.t("GenerateInvoice:markAsPending")]})}):null,Object(n.jsxs)(N.a,{variant:"info",onClick:Y,className:"mr-3",children:[Object(n.jsx)(S.a,{icon:C.o})," ",L.a.t("GenerateInvoice:QR")]}),Object(n.jsxs)(N.a,{disabled:M,variant:"secondary",className:"mr-3",onClick:function(){q.goBack()},children:[Object(n.jsx)(S.a,{icon:C.t})," ",L.a.t("GenerateInvoice:cancel")]}),Object(n.jsxs)(N.a,{disabled:M,variant:"primary",type:"submit",children:[M?Object(n.jsx)(Fe.a,{size:"sm",animation:"border"}):Object(n.jsx)(S.a,{icon:C.p})," ",L.a.t("GenerateInvoice:save")]})]})})]})})})]})}var qe=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(v,{children:Object(n.jsx)(J,{children:Object(n.jsxs)(i.b,{basename:"",children:[Object(n.jsx)(_,{}),Object(n.jsxs)(b.d,{children:[Object(n.jsx)(b.b,{path:"/signup",component:B}),Object(n.jsx)(b.b,{path:"/login",component:M}),Object(n.jsx)(b.b,{path:"/logout",component:G}),Object(n.jsx)(b.b,{path:"/",exact:!0,component:R}),Object(n.jsx)(b.b,{path:"/invoice/generate",component:Ge}),Object(n.jsx)(be,{path:"/invoice/edit/:id",render:function(){return Object(n.jsx)(Ge,{})}}),Object(n.jsx)(b.b,{path:"/invoice/display/:id/:socketId",component:Le}),Object(n.jsx)(be,{path:"/dashboard",render:function(){return Object(n.jsx)(je,{})}}),Object(n.jsx)(b.b,{path:"/signature/:socketId",component:xe}),Object(n.jsx)(b.b,{path:"/offlinesignature/:invoiceId",component:xe}),Object(n.jsx)(b.b,{render:function(){return Object(n.jsx)("div",{children:"Not found"})}})]})]})})})})};u.a.tz.setDefault("America/Buenos_Aires"),u.a.locale("es"),o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsxs)(i.a,{children:[Object(n.jsx)(l.a,{options:{zIndex:998,top:"56px",colors:{error:{color:"#FFFFFF",backgroundColor:"#ff7851"},success:{color:"#FFFFFF",backgroundColor:"#56cc9d"}}}}),Object(n.jsx)(qe,{})]})}),document.getElementById("root"))}},[[273,1,2]]]);
//# sourceMappingURL=main.40b147dc.chunk.js.map